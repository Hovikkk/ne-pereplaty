"use strict";function createTable(){$(".datatables").dataTable({sDom:"<'row'<'col-xs-6'l><'col-xs-6'f>r>t<'row'<'col-xs-6'i><'col-xs-6'p>>",sPaginationType:"bootstrap",aaSorting:[[0,"desc"]],oLanguage:{sLengthMenu:"_MENU_ записей в странице",sSearch:""}}),$(".dataTables_filter input").addClass("form-control").attr("placeholder","поиск..."),$(".dataTables_length select").addClass("form-control")}angular.module("admin",["ngSanitize","ui.router","pascalprecht.translate","angularMoment","angularModalService"]).run(["$rootScope","$state","$stateParams","amMoment","$interval","$http","ModalService",function(a,b,c,d,e,f,g){function h(){var a,b=navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],{name:"IE",version:a[1]||""}):"Chrome"===c[1]&&(a=b.match(/\bOPR\/(\d+)/),null!=a)?{name:"Opera",version:a[1]}:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=b.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]),{name:c[0],version:c[1]})}a.$state=b,a.$stateParams=c,a.time=new Date,d.changeLocale("ru");var i=function(){a.time=new Date},j=(e(i,1e3),h());"IE"===j.name&&(a.cl="ie"),a.showFooter=!0,a.showHeader=!0;var k={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return k.Android()||k.BlackBerry()||k.iOS()||k.Opera()||k.Windows()}};a.isMobile=null!=k.any(),console.log(a.isMobile)}]),angular.module("admin").filter("dotless",function(){return function(a){return a?a.replace(".","-"):void 0}});var admin;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;this.$http=a,this.$state=b,this.$scope=c,this.$rootScope=d,this.AdminService=e,this.types={casco:"каско",osago:"осаго",house:"дом",apartment:"квартира",traveling:"туризм",accident:"здоровье"},this.name="Main Page",this.offers=[],this.$http.get("../api/admin/offers").success(function(a){console.log(a),f.offers=a,setTimeout(createTable,200)})}return a.prototype.selectOffer=function(a){var b=this;this.$http.get("../api/admin/offerInfo/"+a).success(function(a){console.log(a),b.AdminService.currectOffer=a,b.$state.go("offerinfo")})},a.prototype.selectCompany=function(a){var b=this;console.log(a),this.$http.get("../api/admin/company/"+a).success(function(a){console.log(a),b.AdminService.currectCompany=a,b.$state.go("company")})},a.prototype.selectUser=function(a){var b=this;this.$http.get("../api/admin/getprofile/"+a).success(function(a){console.log(a),b.AdminService.currectUser=a,b.$state.go("account")}),console.log(a)},a}();a.MainController=b,angular.module("admin").controller("admin.main.MainController",b)}(b=a.main||(a.main={}))}(admin||(admin={}));var admin;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g){var h=this;this.$http=a,this.$state=b,this.$q=c,this.$timeout=d,this.$scope=e,this.$rootScope=f,this.ModalService=g;var i=this.$q.defer();this.$http.get("../api/account/admin").success(function(a){a.IsSuccessful?i.resolve(a):(h.ModalService.showModal({templateUrl:"login/login.html",controller:"LoginModalController",controllerAs:"loginModalCtrl",inputs:{}}),i.reject(null))}).error(function(){h.ModalService.showModal({templateUrl:"login/login.html",controller:"LoginModalController",controllerAs:"loginModalCtrl",inputs:{}}),i.reject(null)})}return a.prototype.gotoPage=function(a){console.log(a),this.$state.go(a)},a}();a.MenuController=b,angular.module("admin").controller("admin.menu.MenuController",b)}(b=a.menu||(a.menu={}))}(admin||(admin={}));var admin;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;this.$http=a,this.$state=b,this.$scope=c,this.$rootScope=d,this.AdminService=e,this.types={casco:"каско",osago:"осаго",house:"дом",apartment:"квартира",traveling:"туризм",accident:"здоровье"},this.name="Main Page",this.offers=[],this.$http.get("../api/admin/closedataoffers").success(function(a){console.log(a),f.offers=a,setTimeout(createTable,200)})}return a.prototype.selectOffer=function(a){var b=this;this.$http.get("../api/admin/offerInfo/"+a).success(function(a){console.log(a),b.AdminService.currectOffer=a,b.$state.go("offerinfo")})},a.prototype.selectCompany=function(a){var b=this;console.log(a),this.$http.get("../api/admin/company/"+a).success(function(a){console.log(a),b.AdminService.currectCompany=a,b.$state.go("company")})},a.prototype.selectUser=function(a){var b=this;this.$http.get("../api/admin/getprofile/"+a).success(function(a){console.log(a),b.AdminService.currectUser=a,b.$state.go("account")}),console.log(a)},a}();a.CloseOffersController=b,angular.module("admin").controller("admin.closeoffers.CloseOffersController",b)}(b=a.closeoffers||(a.closeoffers={}))}(admin||(admin={}));var admin;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;this.$http=a,this.$state=b,this.$scope=c,this.$rootScope=d,this.AdminService=e,this.types={casco:"каско",osago:"осаго",house:"дом",apartment:"квартира",traveling:"туризм",accident:"здоровье"},this.name="Main Page",this.offers=[],this.$http.get("../api/admin/onpurchasoffers").success(function(a){console.log(a),f.offers=a,setTimeout(createTable,200)})}return a.prototype.selectOffer=function(a){var b=this;this.$http.get("../api/admin/offerInfo/"+a).success(function(a){console.log(a),b.AdminService.currectOffer=a,b.$state.go("offerinfo")})},a.prototype.selectCompany=function(a){var b=this;console.log(a),this.$http.get("../api/admin/company/"+a).success(function(a){console.log(a),b.AdminService.currectCompany=a,b.$state.go("company")})},a.prototype.selectUser=function(a){var b=this;this.$http.get("../api/admin/getprofile/"+a).success(function(a){console.log(a),b.AdminService.currectUser=a,b.$state.go("account")}),console.log(a)},a}();a.OnPurchasOffersController=b,angular.module("admin").controller("admin.onpurchasoffers.OnPurchasOffersController",b)}(b=a.onpurchasoffers||(a.onpurchasoffers={}))}(admin||(admin={}));var admin;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g){switch(this.$http=a,this.$state=b,this.$q=c,this.$timeout=d,this.$scope=e,this.$rootScope=f,this.AdminService=g,this.types={casco:"каско",osago:"осаго",house:"дом",apartment:"квартира",traveling:"туризм",accident:"здоровье"},this.offerinfo=this.AdminService.currectOffer,console.log(this.offerinfo),this.offerinfo.type){case"traveling":this.getTravelingData(this.offerinfo.dataId);break;case"accident":this.getAccidentData(this.offerinfo.dataId);break;case"apartment":case"house":this.getHomeData(this.offerinfo.dataId);break;case"casco":this.getCascoData(this.offerinfo.dataId);break;case"osago":this.getOsagoData(this.offerinfo.dataId)}}return a.prototype.getHomeData=function(a){var b=this;this.$http.get("../api/admin/gethomeoffer/"+a).success(function(a){console.log(a),b.data=a})},a.prototype.getCascoData=function(a){var b=this;this.$http.get("../api/admin/getcascoffer/"+a).success(function(a){console.log(a),b.data=a})},a.prototype.getOsagoData=function(a){var b=this;this.$http.get("../api/admin/getosagoffer/"+a).success(function(a){b.data=a})},a.prototype.getAccidentData=function(a){var b=this;this.$http.get("../api/admin/getaccidentoffer/"+a).success(function(a){b.data=a})},a.prototype.getTravelingData=function(a){var b=this;this.$http.get("../api/admin/gettravelingoffer/"+a).success(function(a){console.log(a),b.data=a})},a.prototype.gotoPage=function(a){this.$state.go(a)},a}();a.OfferController=b,angular.module("admin").controller("admin.offer.OfferController",b)}(b=a.offer||(a.offer={}))}(admin||(admin={}));var admin;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g){var h=this;this.$http=a,this.$state=b,this.$q=c,this.$timeout=d,this.$scope=e,this.$rootScope=f,this.AdminService=g,this.types={casco:"каско",osago:"осаго",house:"дом",apartment:"квартира",traveling:"туризм",accident:"здоровье"},this.account=this.AdminService.currectUser,console.log(this.account),this.$http.get("../api/admin/useroffers/"+this.account.Email).success(function(a){console.log(a),h.offers=a,setTimeout(createTable,200)})}return a.prototype.edit=function(){console.log(this.account),this.$http.put("../api/admin/editprofile",this.account).success(function(a){console.log(a)})},a.prototype.saveComments=function(a){console.log(a),this.$http.put("../api/admin/updateoffer",a).success(function(a){console.log(a)})},a.prototype.selectOffer=function(a){var b=this;this.$http.get("../api/admin/offerInfo/"+a).success(function(a){console.log(a),b.AdminService.currectOffer=a,b.$state.go("offerinfo")})},a.prototype.selectCompany=function(a){var b=this;console.log(a),this.$http.get("../api/admin/company/"+a).success(function(a){console.log(a),b.AdminService.currectCompany=a,b.$state.go("company")})},a.prototype.selectUser=function(a){var b=this;this.$http.get("../api/admin/getprofile/"+a).success(function(a){console.log(a),b.AdminService.currectUser=a,b.$state.go("account")}),console.log(a)},a.prototype.gotoPage=function(a){this.$state.go(a)},a}();a.AdminAccountController=b,angular.module("admin").controller("admin.account.AdminAccountController",b)}(b=a.account||(a.account={}))}(admin||(admin={}));var admin;!function(a){var b;!function(b){var c=function(){function b(a,b,c,d,e,f,g){if(this.$http=a,this.$state=b,this.$q=c,this.$timeout=d,this.$scope=e,this.$rootScope=f,this.AdminService=g,this.types={casco:"каско",osago:"осаго",house:"дом",apartment:"квартира",traveling:"туризм",accident:"здоровье"},this.company=this.AdminService.currectCompany,this.company.insurances){var h=this.company.insurances.split(",");this.type="";for(var i=0;i<h.length;++i)this.type+=this.types[h[i]]}console.log(this.company)}return b.prototype.gotoPage=function(a){this.$state.go(a)},b.prototype.updateData=function(){var b=this;console.log(a.offer),this.$http.put("../api/admin/updatecompany",this.company).success(function(a){b.AdminService.currectCompany=a,b.company=b.AdminService.currectCompany,console.log(a)})},b}();b.CompanyController=c,angular.module("admin").controller("admin.company.CompanyController",c)}(b=a.company||(a.company={}))}(admin||(admin={}));var admin;!function(a){var b;!function(b){var c=function(){function b(a,b,c,d,e,f,g){this.$http=a,this.$state=b,this.$q=c,this.$timeout=d,this.$scope=e,this.$rootScope=f,this.AdminService=g,this.types={casco:"каско",osago:"осаго",house:"дом",apartment:"квартира",traveling:"туризм",accident:"здоровье"},this.company=this.AdminService.currectCompany,console.log(this.company)}return b.prototype.gotoPage=function(a){this.$state.go(a)},b.prototype.updateData=function(){var b=this;console.log(a.offer),this.$http.put("../api/admin/updatecompany",this.company).success(function(a){b.AdminService.currectCompany=a,b.company=b.AdminService.currectCompany,console.log(a)})},b}();b.CreateCompanyController=c,angular.module("admin").controller("admin.createcompany.CreateCompanyController",c)}(b=a.createcompany||(a.createcompany={}))}(admin||(admin={}));var admin;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){this.close=a,this.$q=b,this.$timeout=c,this.$rootScope=d,this.$http=e,console.log("ligin Controller "),d.dismissModal=function(b){void 0===b&&(b=""),a(b)}}return a.prototype.login=function(){var a=this;console.log("Ade hly hoooooooooop");var b=this.$q.defer();this.$http.post("../api/account/loginadmin",{Email:this.userName,Password:this.password}).success(function(c){c.IsSuccessful?(b.resolve(c.Id),a.$rootScope.dismissModal(),window.location.reload()):b.reject(null)}).error(function(){b.reject(null)})},a}();a.LoginModalController=b,angular.module("admin").controller("LoginModalController",b)}(b=a.login||(a.login={}))}(admin||(admin={}));var admin;!function(a){var b=function(){function a(){}return a}();a.CompanyData=b;var c=function(){function a(a,b,c,d){this.id=0,this.name=a,this.surName=b,this.middleName=c,this.age=d}return a}();a.InsuredModel=c;var d=function(){function a(){}return a}();a.OfferData=d;var e=function(){function a(){this.IsMale=!0}return a}();a.AccountData=e;var f=function(){function a(){}return a}();a.Offer=f;var g=function(){function a(){this.offerID=0}return a}();a.TravelingDetail=g;var h=function(){function a(a,b,c){this.$http=a,this.$q=b,this.$timeout=c}return a}();a.AdminService=h,angular.module("admin").service("AdminService",h)}(admin||(admin={}));var admin;!function(a){var b;!function(a){var b=function(){function a(){}return a.configureLang=function(a){a.useStaticFilesLoader({prefix:"lang/",suffix:".json"}),a.preferredLanguage("pl_pl"),a.useSanitizeValueStrategy("sanitize"),console.log("Language configured!")},a}();a.Language=b,angular.module("admin").config(b.configureLang)}(b=a.config||(a.config={}))}(admin||(admin={}));var admin;!function(a){var b;!function(a){var b=function(){function a(){}return a.configureRoutes=function(a,b,c){b.otherwise("/"),a.state("main",{url:"/",templateUrl:"main/main.html",controller:"admin.main.MainController",controllerAs:"mainCtrl"}).state("account",{url:"/account",templateUrl:"adminaccount/adminaccount.html",controller:"admin.account.AdminAccountController",controllerAs:"accountCtrl"}).state("company",{url:"/company",templateUrl:"company/company.html",controller:"admin.company.CompanyController",controllerAs:"companyCtrl"}).state("offerinfo",{url:"/offerinfo",templateUrl:"offer/offer.html",controller:"admin.offer.OfferController",controllerAs:"offerCtrl"}).state("closeoffers",{url:"/closeoffers",templateUrl:"closeoffers/closeoffers.html",controller:"admin.closeoffers.CloseOffersController",controllerAs:"closeoffersCtrl"}).state("onpurchasoffers",{url:"/onpurchasoffers",templateUrl:"onpurchasoffers/onpurchasoffers.html",controller:"admin.onpurchasoffers.OnPurchasOffersController",controllerAs:"onpurchasoffersCtrl"}).state("createcompany",{url:"/createcompany",templateUrl:"createcompany/createcompany.html",controller:"admin.createcompany.CreateCompanyController",controllerAs:"createcompanyCtrl"}),c.html5Mode(!0)},a.$inject=["$stateProvider","$urlRouterProvider"],a}();a.Routes=b,angular.module("admin").config(b.configureRoutes)}(b=a.config||(a.config={}))}(admin||(admin={}));