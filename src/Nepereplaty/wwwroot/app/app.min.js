"use strict";angular.module("nepereplaty",["ngSanitize","ui.router","pascalprecht.translate","angularMoment","pickadate","angucomplete-alt","ngDropdowns","angularModalService"]).run(["$rootScope","$state","$stateParams","amMoment","$interval","$http",function(a,b,c,d,e,f){function g(){var a,b=navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],{name:"IE",version:a[1]||""}):"Chrome"===c[1]&&(a=b.match(/\bOPR\/(\d+)/),null!=a)?{name:"Opera",version:a[1]}:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=b.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]),{name:c[0],version:c[1]})}a.$state=b,a.$stateParams=c,a.time=new Date,a.step3=!1,d.changeLocale("ru"),a.openLogin=!1;var h=function(){a.time=new Date},i=(e(h,1e3),g());console.log(i.name),"IE"===i.name&&(a.cl="ie"),"Firefox"===i.name&&(a.cl="mz"),a.showFooter=!0,a.showHeader=!0,a.showBlindStopper=!0;var j={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return j.Android()||j.BlackBerry()||j.iOS()||j.Opera()||j.Windows()}};setTimeout(function(){a.$apply(function(){a.showBlindStopper=!1})},4e3),console.log(j.any()),a.isMobile=null!=j.any()&&"iPad"!==j.any()[0],a.mod="",console.log(a.isMobile)}]),angular.module("nepereplaty").filter("dotless",function(){return function(a){return a?a.replace(".","-"):void 0}});var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$http=a,this.$q=b,this.$timeout=c,this.isAuthorized=!1,this.userId=null,this.userName="",this.userSurname=""}return a.prototype.checkUser=function(){var a=this,b=this.$q.defer();return this.$http.get("api/account").success(function(c){c.IsSuccessful?(a.isAuthorized=!0,a.userId=c.Id,a.userName=c.Name,a.userSurname=c.Surname,b.resolve(c)):b.reject(null)}).error(function(){b.reject(null)}),b.promise},a.prototype.authenticate=function(a){var b=this,c=this.$q.defer();return this.$http.post("api/account/login",{Email:a.login,Password:a.password}).success(function(a){a.IsSuccessful?(b.isAuthorized=!0,b.userId=a.Id,b.userName=a.Name,b.userSurname=a.Surname,c.resolve(a.Id)):c.reject(null)}).error(function(){c.reject(null)}),c.promise},a.prototype.register=function(a){return this.$http.post("api/account/register",{Email:a.login,Password:a.password,ConfirmPassword:a.confirmPassword,Name:a.name,Surname:a.surname,IsAgreed:a.isAgreed})},a.prototype.logout=function(){var a=this.$q.defer();return this.$http.post("api/account/logout",{}).success(function(a){console.log("api/account/logout")}).error(function(){a.reject(null)}),a.promise},a.prototype.isAuthenticated=function(){var a=this.$q.defer();return null!==this.userId?(this.isAuthorized=!0,a.resolve(!0)):(this.isAuthorized=!1,a.reject(!1)),a.promise},a.prototype.getUserId=function(){return this.userId},a.prototype.getFullName=function(){return this.userName+" "+this.userSurname},a}();a.AuthService=b,angular.module("nepereplaty").service("auth",b)}(b=a.auth||(a.auth={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.$http=a,this.$state=b,this.$q=c,this.$timeout=d,this.auth=e,this.$scope=f,this.$rootScope=g,this.ModalService=h,this.isAuthenticated=!1,this.fullName="",this.openLogin=!1,this.openTelephone=!1,e.checkUser().then(function(a){i.isAuthenticated=a.IsSuccessful,i.fullName=e.getFullName()})}return a.prototype.updata=function(){this.$rootScope.openLogin=this.openLogin},a.prototype.logout=function(){var a=this;this.$http.post("api/account/logout",{}).success(function(b){a.$state.go("home"),window.location.reload()})},a.prototype.update=function(){var a=this;this.isAuthenticated=!1,this.fullName="",this.auth.checkUser().then(function(b){a.isAuthenticated=b.IsSuccessful,a.fullName=a.auth.getFullName()})},a.prototype.login=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/login.html",controller:"LoginModalController",controllerAs:"loginModalCtrl",inputs:{name:"auth"}}).then(function(b){b.close.then(function(b){"register"===b?a.register():("logedin"===b&&(a.isAuthenticated=!0,a.fullName=a.auth.getFullName()),a.$rootScope.isModalShown=!1)})})},a.prototype.register=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/register.html",controller:"RegisterModalController",controllerAs:"registerModalCtrl",inputs:{name:"auth"}}).then(function(b){b.close.then(function(b){"login"===b?a.login():("registered"===b&&(a.isAuthenticated=!0,a.auth.checkUser().then(function(b){a.fullName=a.auth.getFullName()})),a.$rootScope.isModalShown=!1)})})},a}();a.AuthController=b,angular.module("nepereplaty").controller("AuthController",b)}(b=a.auth||(a.auth={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b){void 0===a&&(a=""),void 0===b&&(b=""),this.login=a,this.password=b}return a}();a.UserCredentials=b;var c=function(){function a(a,c,d,e,f,g,h,i){this.close=a,this.name=c,this.$scope=d,this.auth=e,this.$q=f,this.$state=g,this.$timeout=h,this.$rootScope=i,d.vm=this,this.step=0,console.log(this.name),this.closeResult=this.name,d.dismissModal=function(b){void 0===b&&(b=""),console.log(this.loginModalCtrl.name),console.log(b),"logedin"!==b&&"register"!==b&&"auth"!==this.loginModalCtrl.name&&this.$state.go(this.loginModalCtrl.name+".offer"),a(b)},this.credentials=new b,this.isUnSuccessful=!1}return a.prototype.login=function(){var a=this;this.$scope.form.$valid&&this.auth.authenticate(this.credentials).then(function(b){a.$scope.dismissModal("logedin")})["catch"](function(){a.isUnSuccessful=!0})},a.prototype.chackSendMail=function(){this.$scope.form.email.$invalid||(this.step=2)},a}();a.LoginModalController=c,angular.module("nepereplaty").controller("LoginModalController",c)}(b=a.auth||(a.auth={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f){void 0===a&&(a=""),void 0===b&&(b=""),void 0===c&&(c=""),void 0===d&&(d=""),void 0===e&&(e=""),void 0===f&&(f=!1),this.login=a,this.password=b,this.confirmPassword=c,this.name=d,this.surname=e,this.isAgreed=f}return a}();a.RegisterCredentials=b;var c=function(){function a(a,c,d,e,f,g){this.close=a,this.name=c,this.$scope=d,this.auth=e,this.$q=f,this.$timeout=g,d.vm=this,d.dismissModal=function(b){void 0===b&&(b=""),console.log(this.registerModalCtrl.name),console.log(b),"registered"!==b&&"login"!==b&&"auth"!==this.registerModalCtrl.name&&this.$state.go(this.registerModalCtrl.name+".offer"),a(b)},this.credentials=new b,this.emailExists=!1,this.unknownError=!1}return a.prototype.register=function(){var a=this;this.$scope.form.$valid&&this.credentials.password===this.credentials.confirmPassword&&this.credentials.isAgreed&&this.auth.register(this.credentials).success(function(b){b.IsSuccessful?a.$scope.dismissModal("registered"):("EmailExiststs"===b.Error&&(a.emailExists=!0),"Unknown"===b.Error&&(a.unknownError=!0))}).error(function(){console.error("Server communication problem")})},a}();a.RegisterModalController=c,angular.module("nepereplaty").controller("RegisterModalController",c)}(b=a.auth||(a.auth={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e){this.close=a,this.auth=b,this.$q=c,this.$timeout=d,this.$rootScope=e,e.dismissModal=function(b){void 0===b&&(b=""),a(b)}}return a}();a.LoadingModalController=b,angular.module("nepereplaty").controller("LoadingModalController",b)}(b=a.loading||(a.loading={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(){this.TelCode1={text:"--",value:null},this.TelCode2={text:"--",value:null}}return a}();a.ACCOUNTform=b;var c=function(){function a(){}return a}();a.AccountData=c;var d=function(){function a(a,b,c){this.$q=a,this.$http=b,this.auth=c,this.accountData=null}return a.prototype.load=function(){var a=this.$q.defer();return this.$http.get("api/account/profile").success(function(b){console.log(b),a.resolve(b)}).error(function(){a.reject()}),a.promise},a.prototype.getAccount=function(){var a=this,b=this.$q.defer();return null!==this.accountData?(console.log(this.accountData),b.resolve(this.accountData)):this.load().then(function(c){a.accountData=c,a.accountData.PassportnNumber&&(a.accountData.PassportnNumber=parseInt(a.accountData.PassportnNumber.toString(),0)),a.accountData.PassportSerial&&(a.accountData.PassportSerial=parseInt(a.accountData.PassportSerial.toString(),0)),a.accountData.PassportIssued&&(a.accountData.PassportIssued=parseInt(a.accountData.PassportIssued.toString(),0)),a.accountData.Telephone&&(a.accountData.Telephone=parseInt(a.accountData.Telephone.toString(),0)),a.accountData.Mobile&&(a.accountData.Mobile=parseInt(a.accountData.Mobile.toString(),0)),b.resolve(a.accountData)})["catch"](function(){b.reject()}),b.promise},a.prototype.editAccount=function(a){var b=this,c=this.$q.defer();return this.$http.put("api/account",a).success(function(d){d.IsSuccessful?(b.accountData=a,c.resolve(d)):c.reject(d)}).error(function(){c.reject()}),c.promise},a.prototype.changePassword=function(a){var b=this.$q.defer();return this.$http.put("api/account/changepassword",a).success(function(a){a.IsSuccessful?b.resolve(a):b.resolve(a)}).error(function(){b.reject()}),b.promise},a}();a.AccountService=d,angular.module("nepereplaty").service("account",d)}(b=a.account||(a.account={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(a,b,c,d,e,f){var g=this;this.$state=a,this.$http=b,this.$scope=c,this.account=d,this.auth=e,this.$rootScope=f,this.telCode=[{text:"+7",value:"007"},{text:"+1",value:"001"},{text:"+33",value:"0033"},{text:"+374",value:"00374"},{text:"+25",value:"0024"},{text:"+908",value:"00908"}],this.$rootScope.showFooter=!1,this.personalArea=!f.isMobile,this.passportData=!f.isMobile,this.newChangePassword=!f.isMobile,this.showBirthday=!1,this.issued=!1,this.isCurrentPasswordIncorrect=!1,this.changePasswordUnknownError=!1,this.showPeriodStart=!1,d.getAccount().then(function(a){g.manageData=a,console.log(g.manageData),g.updateMiddle(),a.Mobile?null!=a.MobileCode.value?g.manageData.MobileCode=a.MobileCode:g.manageData.MobileCode={text:a.MobileCode,value:a.MobileCode}:g.manageData.MobileCode={text:"--",value:null},a.TelephoneCode?null!=a.TelephoneCode.value?g.manageData.TelephoneCode=a.TelephoneCode:g.manageData.TelephoneCode={text:a.TelephoneCode,value:a.TelephoneCode}:g.manageData.TelephoneCode={text:"--",value:null}}),this.minDate=new Date,this.minDate.setFullYear(1926)}return b.prototype.logout=function(){var a=this;this.$http.post("api/account/logout",{}).success(function(b){a.$state.go("home").then(function(a){window.location.reload()})})},b.prototype.changeMale=function(a){console.log(a)},b.prototype.updateMiddle=function(){this.validate(this.manageData.Name)&&this.validate(this.manageData.Surname)?this.isMiddle=!0:this.isMiddle=!1},b.prototype.validate=function(a){var b=/^[a-zA-Z ]+$/;return b.test(a)},b.prototype.editAccount=function(){var b=this,c=new a.AccountData;this.pasportWhere&&(this.manageData.PassportWhere=this.pasportWhere.title),this.city&&(this.manageData.City=this.city.title),c.Email=this.manageData.Email,c.TelephoneCode=this.manageData.TelephoneCode.value,c.MobileCode=this.manageData.MobileCode.value,c.Adress=this.manageData.Adress,c.Birthday=this.manageData.Birthday,c.City=this.manageData.City,c.IsMale=this.manageData.IsMale,c.Middlename=this.manageData.Middlename,c.Name=this.manageData.Name,c.Surname=this.manageData.Surname,c.Telephone=this.manageData.Telephone,c.Mobile=this.manageData.Mobile,c.PassportIssued=this.manageData.PassportIssued,c.PassportnNumber=this.manageData.PassportnNumber,c.PassportSerial=this.manageData.PassportSerial,c.PassportWhen=this.manageData.PassportWhen,c.PassportWhere=this.manageData.PassportWhere,this.account.editAccount(c).then(function(a){b.account.getAccount().then(function(a){b.manageData=a,null!=a.MobileCode.value?(b.manageData.MobileCode=a.MobileCode,b.manageData.TelephoneCode=a.TelephoneCode):(b.manageData.MobileCode={text:a.MobileCode,value:a.MobileCode},b.manageData.TelephoneCode={text:a.TelephoneCode,value:a.TelephoneCode})})})},b.prototype.changePassword=function(){var a=this;this.$scope.changePasswordForm.$valid&&this.changePasswordModel.NewPassword===this.changePasswordModel.ConfirmNewPassword&&this.account.changePassword(this.changePasswordModel).then(function(b){b.IsSuccessful?(a.changePasswordModel.OldPassword="",a.changePasswordModel.NewPassword="",a.changePasswordModel.ConfirmNewPassword=""):("OldPasswordInvalid"===b.Error&&(a.isCurrentPasswordIncorrect=!0),"Unknown"===b.Error&&(a.changePasswordUnknownError=!0))})},b}();a.AccountController=b,angular.module("nepereplaty").controller("nepereplaty.account.AccountController",b)}(b=a.account||(a.account={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$state=a,this.$scope=b,this.$rootScope=c,this.ModalService=d,this.$rootScope.showFooter=!1}return a.prototype.carModal=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/home/car.modal.html",controller:"CarModalController",controllerAs:"carModalCtrl",inputs:{}}).then(function(b){b.close.then(function(b){"casco"===b&&a.$state.go("casco"),"osago"===b&&a.$state.go("osago"),a.$rootScope.isModalShown=!1})})},a.prototype.gotoTraveling=function(){this.$state.go("traveling")},a.prototype.appartment=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/home/appartment.modal.html",controller:"AppartmentController",controllerAs:"appartmentCtrl",inputs:{}}).then(function(b){b.close.then(function(b){"house"===b&&a.$state.go("house"),"apartment"===b&&a.$state.go("apartment"),a.$rootScope.isModalShown=!1})})},a.prototype.health=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/home/health.modal.html",controller:"HealthController",controllerAs:"healthCtrl",inputs:{}}).then(function(b){b.close.then(function(b){"accident"===b&&a.$state.go("accident"),"medical"===b&&a.$state.go("medical"),a.$rootScope.isModalShown=!1})})},a}();a.HomeController=b,angular.module("nepereplaty").controller("nepereplaty.home.HomeController",b)}(b=a.home||(a.home={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f){this.close=a,this.$scope=b,this.auth=c,this.$q=d,this.$timeout=e,this.$rootScope=f,b.vmm=this,f.mod="mod",b.dismissModal=function(b){void 0===b&&(b=""),console.log(b),a(b),f.mod=""}}return a}();a.CarModalController=b,angular.module("nepereplaty").controller("CarModalController",b)}(b=a.home||(a.home={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f){this.close=a,this.$scope=b,this.auth=c,this.$q=d,this.$timeout=e,this.$rootScope=f,b.vmm=this,f.mod="mod",b.dismisssModal=function(b){void 0===b&&(b=""),console.log(b),a(b),f.mod=""}}return a}();a.AppartmentController=b,angular.module("nepereplaty").controller("AppartmentController",b)}(b=a.home||(a.home={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d,e,f){this.close=a,this.$scope=b,this.auth=c,this.$q=d,this.$timeout=e,this.$rootScope=f,b.vmm=this,f.mod="mod",b.dismissModal=function(b){void 0===b&&(b=""),console.log(b),a(b),f.mod=""}}return a}();a.HealthController=b,angular.module("nepereplaty").controller("HealthController",b)}(b=a.home||(a.home={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(){this.isMale=null,this.martialStatus={text:"--",value:null},this.kids={text:"--",value:null}}return a}();a.Driver=b;var c=function(){function a(){this.IsMale=null,this.Birthday=new Date,this.MobileCode={text:"--",value:null},this.TelephoneCode={text:"--",value:null},this.drivers=[],this.PassportnNumber=null,this.PassportSerial=null,this.PassportWhere=null,this.PassportWhen=null,this.PassportIssued=null,this.City=null,this.Adress=null}return a}();a.OSAGODetailsForm=c;var d=function(){function a(){this.number=null,this.year=null}return a}();a.DriversLicense=d;var e=function(){function a(){this.basic=new h,this.osago=new f,this.drivers=[]}return a}();a.OsagoOfferModel=e;var f=function(){function a(){this.offerId=0}return a}();a.OsagoDetail=f;var g=function(){function a(a,b,c,d,e){this.id=0,this.age=a,this.experience=b,this.isMale=c,this.kids=d,this.martialStatus=e}return a}();a.DriverDetail=g;var h=function(){function a(){this.offerId=0,this.dataId=0}return a}();a.Basic=h;var i=function(){function a(){this.periodStart=new Date,this.startUsingDate=new Date,this.carBody={text:"--",value:null},this.modification={text:"--",value:null},this.transmission={text:"--",value:null},this.region={text:"--",value:null},this.isIndividual={text:"--",value:null},this.isOwner={text:"--",value:null},this.drivers=[],this.isAgreed=!1,this.releaseYearIsLarge=!1}return a}();a.OsagoInsuranceForm=i;var j=function(){function a(){}return a}();a.InsuracneCompany=j;var k=function(){function a(){}return a}();a.AdditionalOption=k;var l=function(){function a(){this.AdditionalOptions=[],this.IsShown=!1,this.IsclickInPhone=!1,this.IsclickInEmail=!1}return a}();a.OSAGOInsuracneOffer=l;var m=function(){function a(){}return a}();a.OSAGOInsuranceOffers=m;var n=function(){function a(a,b,c){this.$http=a,this.$q=b,this.$timeout=c,this.offerIndex=0,this.driver=[]}return a.prototype.loadOffers=function(a){var b=this;return this.$http.post("api/osago/insuranceoffer",a).success(function(a){b.offers=a})},a.prototype.getOffers=function(){return this.offers},a}();a.OSAGOService=n,angular.module("nepereplaty").service("OSAGOService",n)}(b=a.osago||(a.osago={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i){var j=this;this.$http=b,this.$state=c,this.$q=d,this.OSAGOService=e,this.$scope=f,this.ModalService=g,this.$timeout=h,this.$rootScope=i,this.insuranceStartMinData=new Date,this.submitValue="Получить предложение",this.powerOptions=[{text:"До 50",value:"45"},{text:"От 50 до 70",value:"55"},{text:"От 70 до 100",value:"75"},{text:"От 100 до 120",value:"110"},{text:"От 120 до 150",value:"125"},{text:"Свыше 150",value:"155"}],this.regionOptions=[{text:"Первый регион",value:"1"},{text:"Второй регион",value:"2"},{text:"Третий регион",value:"3"}],this.franchiseOptions=[{text:"Первая франшиза",value:"1"},{text:"Вторая франшиза",value:"2"},{text:"Третья франшиза",value:"3"}],this.isIndividualOptions=[{text:"Физическое лицо",value:!0},{text:"Юридическое лицо",value:!1}],this.isOwnerOptions=[{text:"Собственник",value:!0},{text:"По доверенности",value:!1}],this.wasInsuranceOptions=[{text:"Нет",value:"1"},{text:"Да, одна",value:"2"},{text:"Больше",value:"3"}],this.wasClaimsOptions=[{text:"Нет",value:"1"},{text:"Да, один",value:"2"},{text:"Больше",value:"3"}],this.rudderOptions=[{text:"Левосторонний",value:!0},{text:"Правосторонний",value:!1}],this.antiTheftSystemOptions=[{text:"Нет",value:!1},{text:"Сигнализация",value:!1},{text:"Другое",value:!0}],this.searchSystemOptions=[{text:"Нет",value:!1},{text:"GPS",value:!1},{text:"Другое",value:!0}],this.commissionerOptions=[{text:"Нет",value:"1"},{text:"Да",value:"2"},{text:"Другой вариант",value:"3"}],this.evacuationOptions=[{text:"Нет",value:"1"},{text:"Да",value:"2"},{text:"Другой вариант",value:"3"}],this.techSupportOptions=[{text:"Нет",value:"1"},{text:"Да",value:"2"},{text:"Другой вариант",value:"3"}],this.policeReferenceOptions=[{text:"Нет",value:"1"},{text:"Да",value:"2"},{text:"Другой вариант",value:"3"}],this.ageOptions=[{text:"От 18 до 21",value:"1"},{text:"От 21 до 30",value:"2"},{text:"От 30 до 45",value:"3"},{text:"Больше 45",value:"4"}],this.experienceOptions=[{text:"До года",value:"1"},{text:"От 1 года до 3",value:"2"},{text:"От 3 лет до 5",value:"3"},{text:"Больше 5 лет",value:"4"}],this.martialStatusOptions=[{text:"Не женат/не замужем",value:"1"},{text:"Женат/замужем",value:"2"},{text:"Разведён/разведена",value:"3"}],this.driverOptions=[{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"},{text:"Неограниченно",value:"6"}],this.countryOptions=[{text:"Первый регион",value:"1"},{text:"Второй регион",value:"2"},{text:"Третий регион",value:"3"}],this.kidsOptions=[{text:"Нет",value:"0"},{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"Больше 3-ех",value:"4"}],this.driverCountModel=null,this.driversCount=null,this.addDriversCount=function(){this.driversCount++,this.driversCountChange()},this.driversCountChange=function(){if(this.driversCount=this.driverCountModel.value,this.driversCount>5&&(this.driversCount=0),this.isNumeric(this.driversCount)){if(this.driversCount>this.osagoInsuranceForm.drivers.length)for(;this.driversCount>this.osagoInsuranceForm.drivers.push(new a.Driver););this.driversCount<this.osagoInsuranceForm.drivers.length&&this.osagoInsuranceForm.drivers.splice(this.driversCount,this.osagoInsuranceForm.drivers.length-this.driversCount)}},this.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},this.lastBody=null,this.yearBigValue=function(){var a=(new Date).getUTCFullYear();this.osagoInsuranceForm.year>a?(this.osagoInsuranceForm.year=null,this.osagoInsuranceForm.releaseYearIsLarge=!0):this.osagoInsuranceForm.releaseYearIsLarge=!1},this.insuranceStartMinData.setDate(this.insuranceStartMinData.getDate()-1),this.openAboutCar=!i.isMobile,this.openDataDrivers=!i.isMobile,this.openDriver=!i.isMobile,this.$rootScope.showFooter=!0,this.$rootScope.showBlindStopper=!1,this.osagoInsuranceForm=new a.OsagoInsuranceForm,this.showPeriodStart=!1,this.showBuyingDate=!1,this.showStartUsingDate=!1,this.antiTheftSystemAnotherFocused=!1,this.searchSystemAnotherFocused=!1,this.driverCountModel={text:"1",value:"1"},this.driversCountChange(),this.$http.get("api/handbook/region").success(function(a){j.regionOptions=a,j.$http.get("api/handbook/country").success(function(a){j.countryOptions=a})})}return b.prototype.antiTheftSystemSelected=function(a){a.value&&(this.antiTheftSystemAnotherFocused=!0)},b.prototype.searchSystemSelected=function(a){a.value&&(this.searchSystemAnotherFocused=!0)},b.prototype.getCarModificationOptions=function(){var a=this,b="api/handbook/carModifications/"+this.osagoInsuranceForm.year+"/";b+=this.osagoInsuranceForm.brand.originalObject.title+"/"+this.osagoInsuranceForm.model.originalObject.title+"/",b+=this.osagoInsuranceForm.carBody.value+"/",this.$http.get(b).success(function(b){a.modificationOption=b})},b.prototype.getCarTransmissionOptions=function(){var a=this,b="api/handbook/carTransmission/"+this.osagoInsuranceForm.year+"/";b+=this.osagoInsuranceForm.brand.originalObject.title+"/"+this.osagoInsuranceForm.model.originalObject.title+"/",b+=this.osagoInsuranceForm.carBody.value+"/"+this.osagoInsuranceForm.modification.value+"/",this.$http.get(b).success(function(b){a.transmissionOption=b})},b.prototype.getCarDetailsOptions=function(){var a=this,b="api/handbook/carDetails/"+this.osagoInsuranceForm.year+"/";b+=this.osagoInsuranceForm.brand.originalObject.title+"/"+this.osagoInsuranceForm.model.originalObject.title+"/",b+=this.osagoInsuranceForm.carBody.value+"/"+this.osagoInsuranceForm.modification.value+"/",b+=this.osagoInsuranceForm.transmission.value+"/",this.$http.get(b).success(function(b){a.osagoInsuranceForm.power=Number(b.EnginePower),a.osagoInsuranceForm.carCost=Number(b.Price)})},b.prototype.getCarBodyOptions=function(){var a=this;if(!this.osagoInsuranceForm.model)return null;if(!this.lastBody||this.lastBody!==this.osagoInsuranceForm.model.originalObject.value){this.lastBody=this.osagoInsuranceForm.model.originalObject.value;var b="api/handbook/carBodies/"+this.osagoInsuranceForm.year+"/";b+=this.osagoInsuranceForm.brand.originalObject.title+"/"+this.osagoInsuranceForm.model.originalObject.title+"/",this.$http.get(b).success(function(b){console.log(a.carBodyOptions),console.log(b),a.carBodyOptions=b})}},b.prototype.requestOffer=function(){var b=this;if(console.log(this.osagoInsuranceForm),"Получить предложение"===this.submitValue){if(!this.$scope.form.$valid||!this.osagoInsuranceForm.isAgreed)return;if(null==this.osagoInsuranceForm.carBody.value||null==this.osagoInsuranceForm.isIndividual.value||null==this.osagoInsuranceForm.isOwner.value||null==this.osagoInsuranceForm.brand)return;var c=new a.OsagoInsuranceForm;console.log(this.osagoInsuranceForm),c.periodStart=this.osagoInsuranceForm.periodStart,c.year=this.osagoInsuranceForm.year,c.brand=this.osagoInsuranceForm.brand.originalObject.title,c.model=this.osagoInsuranceForm.model.originalObject.title,c.carBody=this.osagoInsuranceForm.carBody.value,c.region=this.osagoInsuranceForm.region.originalObject.value,c.modification=this.osagoInsuranceForm.modification.value,c.startUsingDate=this.osagoInsuranceForm.startUsingDate,c.carCost=this.osagoInsuranceForm.carCost,c.isIndividual=this.osagoInsuranceForm.isIndividual.value,c.isOwner=this.osagoInsuranceForm.isOwner.value,c.drivers=[],c.isAgreed=this.osagoInsuranceForm.isAgreed,c.power=this.osagoInsuranceForm.power;for(var d=0;d<this.osagoInsuranceForm.drivers.length;d++){if(null==this.osagoInsuranceForm.drivers[d].martialStatus.value||null==this.osagoInsuranceForm.drivers[d].kids.value)return;c.drivers[d]=new a.Driver,c.drivers[d].age=this.osagoInsuranceForm.drivers[d].age,c.drivers[d].experience=this.osagoInsuranceForm.drivers[d].experience,c.drivers[d].martialStatus=this.osagoInsuranceForm.drivers[d].martialStatus.value,c.drivers[d].kids=this.osagoInsuranceForm.drivers[d].kids.value,c.drivers[d].isMale=this.osagoInsuranceForm.drivers[d].isMale}this.OSAGOService.driver=c.drivers,this.submitValue="Поиск предложений ...",this.ModalService.showModal({templateUrl:"app/loading/loading.html",controller:"LoadingModalController",controllerAs:"loadingModalCtrl",inputs:{}}),window.scrollTo(0,0),this.OSAGOService.loadOffers(c).success(function(){b.$rootScope.dismissModal("loading"),b.$state.go("osago.offer")})}},b}();a.OSAGOController=b,angular.module("nepereplaty").controller("nepereplaty.osago.OSAGOController",b)}(b=a.osago||(a.osago={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$state=a,this.$q=b,this.OSAGOService=c,this.$rootScope=d,null==this.OSAGOService.getOffers()&&this.$state.go("home"),this.offers=this.OSAGOService.getOffers(),this.startData=this.offers.startData,this.endData=this.offers.endData,this.showMargin=d.isMobile}return a.prototype.buyOffer=function(a){this.OSAGOService.offerIndex=a,console.log(this.OSAGOService.offerIndex),this.$state.go("osago.details")},a}();a.OSAGOOfferController=b,angular.module("nepereplaty").controller("nepereplaty.osago.OSAGOOfferController",b)}(b=a.osago||(a.osago={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j){var k=this;for(this.$http=b,this.$state=c,this.$q=d,this.OSAGOService=e,this.auth=f,this.$scope=g,this.account=h,this.$rootScope=i,this.ModalService=j,this.telCode=[{text:"+7",value:"007"},{text:"+1",value:"001"},{text:"+33",value:"0033"},{text:"+374",value:"00374"},{text:"+25",value:"0024"},{text:"+908",value:"00908"}],null==this.OSAGOService.getOffers()&&this.$state.go("home"),this.personalData=!i.isMobile,this.openPassportData=!i.isMobile,this.openDataDriving=!i.isMobile,this.offers=this.OSAGOService.getOffers(),this.logoUrl=this.offers.Offers[this.OSAGOService.offerIndex].Company.Logo,this.userData=new a.OSAGODetailsForm;this.offers.DriversCount>this.userData.drivers.length;)this.userData.drivers.push(new a.DriversLicense);this.startData=this.offers.startData,this.endData=this.offers.endData,this.auth.getUserId()?h.getAccount().then(function(a){k.manageData=a,k.setData()}):this.login()}return b.prototype.register=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/register.html",controller:"RegisterModalController",controllerAs:"registerModalCtrl",inputs:{name:"osago"}}).then(function(b){b.close.then(function(b){"login"===b?a.login():("registered"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},b.prototype.driversYearCheck=function(){for(var a=(new Date).getUTCFullYear(),b=0;b<this.userData.drivers.length;b++)this.userData.drivers[b].year>a&&(this.userData.drivers[b].year=a)},b.prototype.login=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/login.html",controller:"LoginModalController",controllerAs:"loginModalCtrl",inputs:{name:"osago"}}).then(function(b){b.close.then(function(b){"register"===b?a.register():("logedin"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},b.prototype.editAccount=function(){var a=this;this.account.editAccount(this.manageData).then(function(b){a.account.getAccount().then(function(b){a.manageData=b,a.setData()})})},b.prototype.updateMiddle=function(){this.validate(this.userData.Name)&&this.validate(this.userData.Surname)?this.isMiddle=!0:this.isMiddle=!1},b.prototype.validate=function(a){var b=/^[a-zA-Z ]+$/;return b.test(a)},b.prototype.setData=function(){this.userData.Adress=this.manageData.Adress,this.userData.Birthday=this.manageData.Birthday,this.userData.City=this.manageData.City,this.userData.Email=this.manageData.Email,this.userData.IsMale=this.manageData.IsMale,this.userData.Middlename=this.manageData.Middlename,this.userData.Name=this.manageData.Name,this.userData.PassportIssued=this.manageData.PassportIssued,this.userData.PassportnNumber=this.manageData.PassportnNumber,this.userData.PassportSerial=this.manageData.PassportSerial,this.userData.PassportWhen=this.manageData.PassportWhen,this.userData.PassportWhere=this.manageData.PassportWhere,this.userData.Surname=this.manageData.Surname,this.userData.Mobile=Number(this.manageData.Mobile),this.userData.Telephone=Number(this.manageData.Telephone),this.manageData.MobileCode?null!=this.manageData.MobileCode.text?this.userData.MobileCode=this.manageData.MobileCode:this.userData.MobileCode={text:this.manageData.MobileCode,value:this.manageData.MobileCode}:this.userData.MobileCode={text:"--",value:null},this.manageData.TelephoneCode?null!=this.manageData.TelephoneCode.text?this.userData.TelephoneCode=this.manageData.TelephoneCode:this.userData.TelephoneCode={text:this.manageData.TelephoneCode,value:this.manageData.TelephoneCode}:this.userData.TelephoneCode={text:"--",value:null},this.updateMiddle()},b.prototype.requestBuyOffer=function(){var b=this;if(this.$scope.form.$valid&&(this.pasportWhere&&(this.userData.PassportWhere=this.pasportWhere.title),this.city&&(this.userData.City=this.city.title),null!=this.userData.Adress&&null!=this.userData.City&&null!=this.userData.Email&&null!=this.userData.IsMale&&null!=this.userData.Name&&null!=this.userData.PassportIssued&&null!=this.userData.PassportnNumber&&null!=this.userData.PassportSerial&&null!=this.userData.PassportWhere&&null!=this.userData.Surname&&null!=this.userData.Mobile&&null!=this.userData.Telephone&&void 0!==this.userData.PassportWhen&&(this.isMiddle||null!=this.userData.Middlename))){for(var c=0;c<this.userData.drivers.length;c++)if(null==this.userData.drivers[c].number||null==this.userData.drivers[c].year)return;
this.manageData.Adress=this.userData.Adress,this.manageData.Birthday=this.userData.Birthday,this.manageData.City=this.userData.City,this.manageData.Email=this.userData.Email,this.manageData.IsMale=this.userData.IsMale,this.manageData.Middlename=this.userData.Middlename,this.manageData.Name=this.userData.Name,this.manageData.PassportIssued=this.userData.PassportIssued,this.manageData.PassportnNumber=this.userData.PassportnNumber,this.manageData.PassportSerial=this.userData.PassportSerial,this.manageData.PassportWhen=this.userData.PassportWhen,this.manageData.PassportWhere=this.userData.PassportWhere,this.manageData.Surname=this.userData.Surname,this.manageData.Mobile=this.userData.Mobile,this.manageData.Telephone=this.userData.Telephone,this.manageData.MobileCode=this.userData.MobileCode.value,this.manageData.TelephoneCode=this.userData.TelephoneCode.value,this.editAccount(),this.OSAGOService.buyerInfo=this.userData;var d=new a.OsagoOfferModel;d.basic.buyer=this.userData.Email,d.basic.companyId=this.offers.Offers[this.OSAGOService.offerIndex].Company.Id,d.basic.cost=this.stringToFloat(this.OSAGOService.getOffers().Offers[this.OSAGOService.offerIndex].Price),d.basic.startDate=this.startData,d.basic.endDate=this.endData,d.basic.type="osago",d.osago.brand=this.offers.CarBrand,d.osago.model=this.offers.CarModel+" "+this.offers.CarReleaseYear;for(var c=0;c<this.OSAGOService.driver.length;++c){var e=this.OSAGOService.driver[c];d.drivers.push(new a.DriverDetail(e.age,e.experience,e.isMale,e.kids,e.martialStatus))}this.$http.put("api/admin/osago",d).success(function(a){b.OSAGOService.offerId=a.offerId,b.$state.go("osago.payment")})}},b.prototype.stringToFloat=function(a){var b=0,c=a.replace(",","."),d=c.replace(/ /g,""),e=d.replace(" ","").replace(String.fromCharCode(160),"");return b=parseFloat(e)},b}();a.OSAGODetailsController=b,angular.module("nepereplaty").controller("nepereplaty.osago.OSAGODetailsController",b)}(b=a.osago||(a.osago={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$state=a,this.$q=b,this.OSAGOService=c,null==this.OSAGOService.getOffers()&&this.$state.go("home"),this.offers=this.OSAGOService.getOffers(),this.logoUrl=this.offers.Offers[this.OSAGOService.offerIndex].Company.Logo,this.offer=this.offers.Offers[this.OSAGOService.offerIndex],console.log(this.offer),this.startData=this.offers.startData,this.endData=this.offers.endData}return a.prototype.pay=function(){this.$state.go("osago.finish")},a}();a.OSAGOPaymentController=b,angular.module("nepereplaty").controller("nepereplaty.osago.OSAGOPaymentController",b)}(b=a.osago||(a.osago={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$http=a,this.$state=b,this.$q=c,this.OSAGOService=d,null==this.OSAGOService.getOffers()&&this.$state.go("home"),this.offer=this.OSAGOService.getOffers().Offers[this.OSAGOService.offerIndex],this.data=this.OSAGOService.buyerInfo,this.age=this.OSAGOService.getOffers().DriversMinAge,this.orderNumber=this.OSAGOService.offerId,this.startData=this.OSAGOService.getOffers().startData,this.endData=this.OSAGOService.getOffers().endData,this.DriversCount=this.OSAGOService.getOffers().DriversCount,this.$http.get("../api/admin/purchas/"+this.orderNumber+"/"+this.stringtoNumber(this.offer.Price)).success(function(a){console.log(a)})}return a.prototype.stringtoNumber=function(a){var b=0,c=a.replace(",","."),d=c.replace(/ /g,""),e=d.replace(" ","").replace(String.fromCharCode(160),"");return b=parseFloat(e)},a.prototype.downloadPdf=function(){window.open("../../p/example.pdf")},a}();a.OSAGOFinishController=b,angular.module("nepereplaty").controller("nepereplaty.osago.OSAGOFinishController",b)}(b=a.osago||(a.osago={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(){this.isMale=null,this.martialStatus={text:"--",value:null},this.kids={text:"--",value:null}}return a}();a.Driver=b;var c=function(){function a(){this.IsMale=null,this.Birthday=new Date,this.MobileCode={text:"--",value:null},this.TelephoneCode={text:"--",value:null},this.drivers=[],this.PassportnNumber=null,this.PassportSerial=null,this.PassportWhere=null,this.PassportWhen=null,this.PassportIssued=null,this.City=null,this.Adress=null}return a}();a.CASCODetailsForm=c;var d=function(){function a(){this.basic=new g,this.casco=new e,this.drivers=[]}return a}();a.CascoOfferModel=d;var e=function(){function a(){this.offerId=0}return a}();a.CascoDetail=e;var f=function(){function a(a,b,c,d,e){this.id=0,this.age=a,this.experience=b,this.isMale=c,this.kids=d,this.martialStatus=e}return a}();a.DriverDetail=f;var g=function(){function a(){this.offerId=0,this.dataId=0}return a}();a.Basic=g;var h=function(){function a(){this.number=null,this.year=null}return a}();a.DriversLicense=h;var i=function(){function a(){this.periodStart=new Date,this.startUsingDate=new Date,this.buyingDate=new Date,this.carBody={text:"--",value:null},this.modification={text:"--",value:null},this.transmission={text:"--",value:null},this.region={text:"--",value:null},this.franchise={text:"--",value:null},this.isIndividual={text:"--",value:null},this.isOwner={text:"--",value:null},this.wasInsurance={text:"Нет",value:1},this.wasClaims={text:"Нет",value:1},this.carClaimsOneYearAgo={text:"Нет",value:1},this.carClaimsTwoYearAgo={text:"Нет",value:1},this.carClaimsThreeYearAgo={text:"Нет",value:1},this.mutilationClaimsOneYearAgo={text:"Нет",value:1},this.mutilationClaimsTwoYearAgo={text:"Нет",value:1},this.mutilationClaimsThreeYearAgo={text:"Нет",value:1},this.isLeftSideRudder={text:"--",value:null},this.antiTheftSystem={text:"--",value:null},this.searchSystem={text:"--",value:null},this.releaseYearIsLarge=!1,this.drivers=[],this.isAgreed=!1,this.InsuranceMode=null}return a}();a.CascoInsuranceForm=i;var j=function(){function a(){}return a}();a.InsuracneCompany=j;var k=function(){function a(){}return a}();a.AdditionalOption=k;var l=function(){function a(){this.AdditionalOptions=[],this.IsShown=!1,this.isCompair=!1}return a}();a.CASCOInsuracneOffer=l;var m=function(){function a(){}return a}();a.CASCOInsuranceOffers=m;var n=function(){function a(a,b,c){this.$http=a,this.$q=b,this.$timeout=c,this.offerIndex=0,this.driver=[]}return a.prototype.loadOffers=function(a){var b=this;return this.$http.post("api/casco/insuranceoffer",a).success(function(a){b.offers=a})},a.prototype.getOffers=function(){return this.offers},a}();a.CASCOService=n,angular.module("nepereplaty").service("CASCOService",n)}(b=a.casco||(a.casco={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i){this.$http=b,this.$state=c,this.$q=d,this.CASCOService=e,this.$scope=f,this.ModalService=g,this.$timeout=h,this.$rootScope=i,this.insuranceStartMinData=new Date,this.submitValue="Получить предложение",this.powerOptions=[{text:"До 50",value:"45"},{text:"От 50 до 70",value:"55"},{text:"От 70 до 100",value:"75"},{text:"От 100 до 120",value:"110"},{text:"От 120 до 150",value:"125"},{text:"Свыше 150",value:"155"}],this.regionOptions=[{text:"Первый регион",value:"1"},{text:"Второй регион",value:"2"},{text:"Третий регион",value:"3"}],this.franchiseOptions=[{text:"15000",value:"15000_15000"},{text:"50000",value:"50000_50000"}],this.isIndividualOptions=[{text:"Физическое лицо",value:!0},{text:"Юридическое лицо",value:!1}],this.isOwnerOptions=[{text:"Собственник",value:!0},{text:"По доверенности",value:!1}],this.wasInsuranceOptions=[{text:"Нет",value:"1"},{text:"Да, одна",value:"2"},{text:"Больше",value:"3"}],this.wasClaimsOptions=[{text:"Нет",value:"1"},{text:"Да, один",value:"2"},{text:"Больше",value:"3"}],this.rudderOptions=[{text:"Левосторонний",value:!0},{text:"Правосторонний",value:!1}],this.antiTheftSystemOptions=[{text:"Нет",value:!1},{text:"Сигнализация",value:!1},{text:"Другое",value:!0}],this.searchSystemOptions=[{text:"Нет",value:!1},{text:"GPS",value:!1},{text:"Другое",value:!0}],this.commissionerOptions=[{text:"Нет",value:"1"},{text:"Да",value:"2"},{text:"Другой вариант",value:"3"}],this.evacuationOptions=[{text:"Нет",value:"1"},{text:"Да",value:"2"},{text:"Другой вариант",value:"3"}],this.techSupportOptions=[{text:"Нет",value:"1"},{text:"Да",value:"2"},{text:"Другой вариант",value:"3"}],this.policeReferenceOptions=[{text:"Нет",value:"1"},{text:"Да",value:"2"},{text:"Другой вариант",value:"3"}],this.ageOptions=[{text:"От 18 до 21",value:"1"},{text:"От 21 до 30",value:"2"},{text:"От 30 до 45",value:"3"},{text:"Больше 45",value:"4"}],this.experienceOptions=[{text:"До года",value:"1"},{text:"От 1 года до 3",value:"2"},{text:"От 3 лет до 5",value:"3"},{text:"Больше 5 лет",value:"4"}],this.martialStatusOptions=[{text:"Не женат/не замужем",value:"1"},{text:"Женат/замужем",value:"2"},{text:"Разведён/разведена",value:"3"}],this.kidsOptions=[{text:"Нет",value:"0"},{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"Больше 3-ех",value:"4"}],this.driverOptions=[{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"},{text:"Неограниченно",value:"6"}],this.driverCountModel=null,this.driversCount=null,this.addDriversCount=function(){this.driversCount++,this.driversCountChange()},this.driversCountChange=function(){if(this.driversCount=this.driverCountModel.value,this.driversCount>5&&(this.driversCount=0),this.isNumeric(this.driversCount)){if(this.driversCount>this.cascoInsuranceForm.drivers.length)for(;this.driversCount>this.cascoInsuranceForm.drivers.push(new a.Driver););this.driversCount<this.cascoInsuranceForm.drivers.length&&this.cascoInsuranceForm.drivers.splice(this.driversCount,this.cascoInsuranceForm.drivers.length-this.driversCount)}},this.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},this.lastBody=null,this.yearBigValue=function(){var a=(new Date).getUTCFullYear();this.cascoInsuranceForm.releaseYear>a?(this.cascoInsuranceForm.releaseYear=null,this.cascoInsuranceForm.releaseYearIsLarge=!0):this.cascoInsuranceForm.releaseYearIsLarge=!1},this.insuranceStartMinData.setDate(this.insuranceStartMinData.getDate()-1),this.$rootScope.showFooter=!0,this.$rootScope.showBlindStopper=!1,this.cascoInsuranceForm=new a.CascoInsuranceForm,this.openAboutCar=!i.isMobile,this.openDataDrivers=!i.isMobile,this.openListDrivers=!i.isMobile,this.openExtraOptions=!i.isMobile,this.openAdditionalServices=!i.isMobile,this.openPreviousInsurance=!i.isMobile,this.showPeriodStart=!1,this.showBuyingDate=!1,this.showStartUsingDate=!1,this.antiTheftSystemAnotherFocused=!1,this.searchSystemAnotherFocused=!1,this.driverCountModel={text:"1",value:"1"},this.driversCountChange(),this.getRegions()}return b.prototype.stringtoNumber=function(a){var b=0,c=a.replace(" ",".").replace(String.fromCharCode(160),""),d=c.replace(",","");return b=parseFloat(d),console.log(b),b},b.prototype.getRegions=function(){var a=this,b="api/handbook/region/";this.$http.get(b).success(function(b){console.log(a.regions),a.regions=b,console.log(a.regions)})},b.prototype.antiTheftSystemSelected=function(a){a.value&&(this.antiTheftSystemAnotherFocused=!0)},b.prototype.searchSystemSelected=function(a){a.value&&(this.searchSystemAnotherFocused=!0)},b.prototype.getCarModificationOptions=function(){var a=this,b="api/handbook/carModifications/"+this.cascoInsuranceForm.releaseYear+"/";b+=this.cascoInsuranceForm.brand.originalObject.title+"/"+this.cascoInsuranceForm.model.originalObject.title+"/",b+=this.cascoInsuranceForm.carBody.value+"/",this.$http.get(b).success(function(b){a.modificationOption=b})},b.prototype.getCarTransmissionOptions=function(){var a=this,b="api/handbook/carTransmission/"+this.cascoInsuranceForm.releaseYear+"/";b+=this.cascoInsuranceForm.brand.originalObject.title+"/"+this.cascoInsuranceForm.model.originalObject.title+"/",b+=this.cascoInsuranceForm.carBody.value+"/"+this.cascoInsuranceForm.modification.value+"/",this.$http.get(b).success(function(b){a.transmissionOption=b})},b.prototype.getCarDetailsOptions=function(){var a=this,b="api/handbook/carDetails/"+this.cascoInsuranceForm.releaseYear+"/";b+=this.cascoInsuranceForm.brand.originalObject.title+"/"+this.cascoInsuranceForm.model.originalObject.title+"/",b+=this.cascoInsuranceForm.carBody.value+"/"+this.cascoInsuranceForm.modification.value+"/",b+=this.cascoInsuranceForm.transmission.value+"/",this.$http.get(b).success(function(b){console.log(b),a.cascoInsuranceForm.power=Number(b.EnginePower),a.cascoInsuranceForm.carCost=Number(b.Price),console.log(b),a.cascoInsuranceForm.EngineHorsepower=b.EnginePower,a.cascoInsuranceForm.EnginePowerKWt=b.EnginePowerKWt,a.cascoInsuranceForm.GroupId=b.GroupId,a.cascoInsuranceForm.VehicleMarkModelCode=b.Id,a.cascoInsuranceForm.Model=b.Model,a.cascoInsuranceForm.Modification=b.Modification,a.cascoInsuranceForm.VehicleMarkModelRAMICode=b.RsaCode,console.log(a.cascoInsuranceForm)})},b.prototype.getCarBodyOptions=function(){var a=this;if(!this.cascoInsuranceForm.model)return null;if(!this.lastBody||this.lastBody!==this.cascoInsuranceForm.model.originalObject.title){this.lastBody=this.cascoInsuranceForm.model.originalObject.title;var b="api/handbook/carBodies/"+this.cascoInsuranceForm.releaseYear+"/";b+=this.cascoInsuranceForm.brand.originalObject.title+"/"+this.cascoInsuranceForm.model.originalObject.title+"/",this.$http.get(b).success(function(b){console.log(a.carBodyOptions),console.log(b),a.carBodyOptions=b})}},b.prototype.requestOffer=function(){var b=this;if(console.log(this.cascoInsuranceForm),this.$scope.form.$valid&&this.cascoInsuranceForm.isAgreed&&null!=this.cascoInsuranceForm.carBody.value&&null!=this.cascoInsuranceForm.franchise.value&&null!=this.cascoInsuranceForm.isIndividual.value&&null!=this.cascoInsuranceForm.isOwner.value&&null!=this.cascoInsuranceForm.wasInsurance.value&&null!=this.cascoInsuranceForm.wasClaims.value&&null!=this.cascoInsuranceForm.carClaimsOneYearAgo.value&&null!=this.cascoInsuranceForm.carClaimsTwoYearAgo.value&&null!=this.cascoInsuranceForm.carClaimsThreeYearAgo.value&&null!=this.cascoInsuranceForm.mutilationClaimsOneYearAgo.value&&null!=this.cascoInsuranceForm.mutilationClaimsTwoYearAgo.value&&null!=this.cascoInsuranceForm.mutilationClaimsThreeYearAgo.value&&null!=this.cascoInsuranceForm.isLeftSideRudder.value&&null!=this.cascoInsuranceForm.antiTheftSystem.value&&null!=this.cascoInsuranceForm.searchSystem.value&&null!=this.cascoInsuranceForm.commissioner&&null!=this.cascoInsuranceForm.evacuation&&null!=this.cascoInsuranceForm.techSupport&&null!=this.cascoInsuranceForm.policeReference&&null!=this.cascoInsuranceForm.InsuranceMode){console.log(" ------ ");var c=new a.CascoInsuranceForm;c.carBody=this.cascoInsuranceForm.carBody.value,c.region=this.cascoInsuranceForm.region.originalObject.value,c.franchise=this.cascoInsuranceForm.franchise.value,c.isIndividual=this.cascoInsuranceForm.isIndividual.value,c.isOwner=this.cascoInsuranceForm.isOwner.value,c.wasInsurance=this.cascoInsuranceForm.wasInsurance.value.toString(),c.wasClaims=this.cascoInsuranceForm.wasClaims.value.toString(),c.carClaimsOneYearAgo=this.cascoInsuranceForm.carClaimsOneYearAgo.value.toString(),c.carClaimsTwoYearAgo=this.cascoInsuranceForm.carClaimsTwoYearAgo.value.toString(),c.carClaimsThreeYearAgo=this.cascoInsuranceForm.carClaimsThreeYearAgo.value.toString(),c.mutilationClaimsOneYearAgo=this.cascoInsuranceForm.mutilationClaimsOneYearAgo.value.toString(),c.mutilationClaimsTwoYearAgo=this.cascoInsuranceForm.mutilationClaimsTwoYearAgo.value.toString(),c.mutilationClaimsThreeYearAgo=this.cascoInsuranceForm.mutilationClaimsThreeYearAgo.value.toString(),c.isLeftSideRudder=this.cascoInsuranceForm.isLeftSideRudder.value,c.antiTheftSystem=this.cascoInsuranceForm.antiTheftSystem.value.toString(),c.searchSystem=this.cascoInsuranceForm.searchSystem.value.toString(),c.commissioner=this.cascoInsuranceForm.commissioner.toString(),c.evacuation=this.cascoInsuranceForm.evacuation.toString(),c.techSupport=this.cascoInsuranceForm.techSupport.toString(),c.policeReference=this.cascoInsuranceForm.policeReference.toString(),c.modification=this.cascoInsuranceForm.modification.value,c.brand=this.cascoInsuranceForm.brand.originalObject.value,c.model=this.cascoInsuranceForm.model.originalObject.value,c.drivers=[],c.transmission=this.cascoInsuranceForm.transmission.value,c.antiTheftSystem_another=this.cascoInsuranceForm.antiTheftSystem_another,c.buyingDate=this.cascoInsuranceForm.buyingDate,c.carCost=this.cascoInsuranceForm.carCost,c.isAgreed=this.cascoInsuranceForm.isAgreed,c.isCredit=this.cascoInsuranceForm.isCredit,c.isGuarantee=this.cascoInsuranceForm.isGuarantee,c.InsuranceMode=this.cascoInsuranceForm.InsuranceMode.value,c.periodStart=this.cascoInsuranceForm.periodStart,c.searchSystem_another=this.cascoInsuranceForm.searchSystem_another,c.startUsingDate=this.cascoInsuranceForm.startUsingDate,c.releaseYear=this.cascoInsuranceForm.releaseYear,c.releaseYearIsLarge=this.cascoInsuranceForm.releaseYearIsLarge,c.power=this.cascoInsuranceForm.power,c.InsuranceMode=this.cascoInsuranceForm.InsuranceMode.toString(),c.EngineHorsepower=this.cascoInsuranceForm.EngineHorsepower,c.EnginePowerKWt=this.cascoInsuranceForm.EnginePowerKWt,c.GroupId=this.cascoInsuranceForm.GroupId,c.VehicleMarkModelCode=this.cascoInsuranceForm.VehicleMarkModelCode.toString(),c.Model=this.cascoInsuranceForm.Model,c.Modification=this.cascoInsuranceForm.Modification,c.VehicleMarkModelRAMICode=this.cascoInsuranceForm.VehicleMarkModelRAMICode.toString(),c.city=this.cascoInsuranceForm.city.title,console.log(c);for(var d=0;d<this.cascoInsuranceForm.drivers.length;d++){if(null==this.cascoInsuranceForm.drivers[d].martialStatus.value||null==this.cascoInsuranceForm.drivers[d].kids.value)return;c.drivers[d]=new a.Driver,c.drivers[d].age=this.cascoInsuranceForm.drivers[d].age,c.drivers[d].experience=this.cascoInsuranceForm.drivers[d].experience,c.drivers[d].martialStatus=this.cascoInsuranceForm.drivers[d].martialStatus.value,c.drivers[d].kids=this.cascoInsuranceForm.drivers[d].kids.value,c.drivers[d].isMale=this.cascoInsuranceForm.drivers[d].isMale}this.submitValue="Поиск предложений ...",this.ModalService.showModal({templateUrl:"app/loading/loading.html",controller:"LoadingModalController",controllerAs:"loadingModalCtrl",inputs:{}}),window.scrollTo(0,0),this.CASCOService.loadOffers(c).success(function(){b.$rootScope.dismissModal("loading"),b.$state.go("casco.offer")})}},b}();a.CASCOontroller=b,angular.module("nepereplaty").controller("nepereplaty.casco.CASCOController",b)}(b=a.casco||(a.casco={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$state=a,this.$q=b,this.CASCOService=c,this.$rootScope=d,null==this.CASCOService.getOffers()&&this.$state.go("home"),this.offers=this.CASCOService.getOffers(),this.canCompare=!1,this.startData=this.offers.startData,this.endData=this.offers.endData,this.showMargin=d.isMobile}return a.prototype.buyOffer=function(a){this.CASCOService.offerIndex=a,this.$state.go("casco.details")},a.prototype.onClickCompareChackBox=function(){for(var a,b=[],c=0,d=0;d<this.offers.Offers.length;++d)a=this.offers.Offers[d],a.isCompair&&b.push(c),c++;2===b.length?this.canCompare=!0:this.canCompare=!1,console.log(this.canCompare)},a.prototype.compare=function(){this.canCompare&&this.$state.go("casco.compare")},a}();a.CASCOOfferController=b,angular.module("nepereplaty").controller("nepereplaty.casco.CASCOOfferController",b)}(b=a.casco||(a.casco={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$state=a,this.$q=b,this.CASCOService=c,console.log("++++++++++++++++++____"),this.offers=this.CASCOService.getOffers(),this.offers.Offers[0].AdditionalOptions.length>this.offers.Offers[1].AdditionalOptions.length?this.AdditionalOptions=this.offers.Offers[0].AdditionalOptions:this.AdditionalOptions=this.offers.Offers[1].AdditionalOptions,console.log("++++++++++++++++++____")}return a.prototype.back=function(){console.log("________________________________==================="),this.$state.go("casco.offer")},a}();a.CASCOCompareController=b,angular.module("nepereplaty").controller("nepereplaty.casco.CASCOCompareController",b)}(b=a.casco||(a.casco={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(b){var c=function(){function c(a,c,d,e,f,g,h,i,j){var k=this;for(this.$http=a,this.$state=c,this.$q=d,this.CASCOService=e,this.auth=f,this.$scope=g,this.account=h,this.$rootScope=i,this.ModalService=j,this.telCode=[{text:"+7",value:"007"},{text:"+1",value:"001"},{text:"+33",value:"0033"},{text:"+374",value:"00374"},{text:"+25",value:"0024"},{text:"+908",value:"00908"}],null==this.CASCOService.getOffers()&&this.$state.go("home"),this.personalData=!i.isMobile,this.openPassportData=!i.isMobile,this.openDataDriving=!i.isMobile,this.offers=this.CASCOService.getOffers(),this.userData=new b.CASCODetailsForm,this.startData=this.offers.startData,this.endData=this.endData=this.offers.endData,this.logoUrl=this.offers.Offers[this.CASCOService.offerIndex].Company.Logo;this.offers.DriversCount>this.userData.drivers.length;)this.userData.drivers.push(new b.DriversLicense);this.auth.getUserId()?h.getAccount().then(function(a){k.manageData=a,k.setData()}):this.login()}return c.prototype.register=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/register.html",controller:"RegisterModalController",controllerAs:"registerModalCtrl",inputs:{name:"casco"}}).then(function(b){b.close.then(function(b){"login"===b?a.login():("registered"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},c.prototype.login=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/login.html",controller:"LoginModalController",controllerAs:"loginModalCtrl",inputs:{name:"casco"}}).then(function(b){b.close.then(function(b){"register"===b?a.register():("logedin"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},c.prototype.editAccount=function(){var a=this;this.account.editAccount(this.manageData).then(function(b){a.account.getAccount().then(function(b){a.manageData=b,a.setData()})})},c.prototype.updateMiddle=function(){this.validate(this.userData.Name)&&this.validate(this.userData.Surname)?this.isMiddle=!0:this.isMiddle=!1},c.prototype.driversYearCheck=function(){for(var a=(new Date).getUTCFullYear(),b=0;b<this.userData.drivers.length;b++)this.userData.drivers[b].year>a&&(this.userData.drivers[b].year=a)},c.prototype.validate=function(a){var b=/^[a-zA-Z ]+$/;return b.test(a)},c.prototype.setData=function(){this.userData.Adress=this.manageData.Adress,this.userData.Birthday=this.manageData.Birthday,this.userData.City=this.manageData.City,this.userData.Email=this.manageData.Email,this.userData.IsMale=this.manageData.IsMale,this.userData.Middlename=this.manageData.Middlename,this.userData.Name=this.manageData.Name,this.userData.PassportIssued=this.manageData.PassportIssued,this.userData.PassportnNumber=this.manageData.PassportnNumber,this.userData.PassportSerial=this.manageData.PassportSerial,this.userData.PassportWhen=this.manageData.PassportWhen,this.userData.PassportWhere=this.manageData.PassportWhere,this.userData.Surname=this.manageData.Surname,this.userData.Mobile=Number(this.manageData.Mobile),this.userData.Telephone=Number(this.manageData.Telephone),this.manageData.MobileCode?null!=this.manageData.MobileCode.text?this.userData.MobileCode=this.manageData.MobileCode:this.userData.MobileCode={text:this.manageData.MobileCode,value:this.manageData.MobileCode}:this.userData.MobileCode={text:"--",value:null},this.manageData.TelephoneCode?null!=this.manageData.TelephoneCode.text?this.userData.TelephoneCode=this.manageData.TelephoneCode:this.userData.TelephoneCode={text:this.manageData.TelephoneCode,value:this.manageData.TelephoneCode}:this.userData.TelephoneCode={text:"--",value:null},this.updateMiddle()},c.prototype.requestBuyOffer=function(){var c=this;if(this.$scope.form.$valid&&(this.pasportWhere&&(this.userData.PassportWhere=this.pasportWhere.title),this.city&&(this.userData.City=this.city.title),null!=this.userData.Adress&&null!=this.userData.City&&null!=this.userData.Email&&null!=this.userData.IsMale&&null!=this.userData.Name&&null!=this.userData.PassportIssued&&null!=this.userData.PassportnNumber&&null!=this.userData.PassportSerial&&null!=this.userData.PassportWhere&&null!=this.userData.Surname&&null!=this.userData.Mobile&&null!=this.userData.Telephone&&void 0!==this.userData.PassportWhen&&(this.isMiddle||null!=this.userData.Middlename))){for(var d=0;d<this.userData.drivers.length;d++)if(null==this.userData.drivers[d].number||null==this.userData.drivers[d].year)return;this.manageData.Adress=this.userData.Adress,this.manageData.Birthday=this.userData.Birthday,this.manageData.City=this.userData.City,this.manageData.Email=this.userData.Email,this.manageData.IsMale=this.userData.IsMale,this.manageData.Middlename=this.userData.Middlename,this.manageData.Name=this.userData.Name,this.manageData.PassportIssued=this.userData.PassportIssued,this.manageData.PassportnNumber=this.userData.PassportnNumber,this.manageData.PassportSerial=this.userData.PassportSerial,this.manageData.PassportWhen=this.userData.PassportWhen,this.manageData.PassportWhere=this.userData.PassportWhere,this.manageData.Surname=this.userData.Surname,this.manageData.Mobile=this.userData.Mobile,this.manageData.Telephone=this.userData.Telephone,this.manageData.MobileCode=this.userData.MobileCode.value,this.manageData.TelephoneCode=this.userData.TelephoneCode.value,this.editAccount(),this.CASCOService.buyerInfo=this.userData;var e=new a.osago.OsagoOfferModel;e.basic.buyer=this.userData.Email,e.basic.companyId=this.offers.Offers[this.CASCOService.offerIndex].Company.Id,e.basic.cost=this.stringToFloat(this.CASCOService.getOffers().Offers[this.CASCOService.offerIndex].Price),e.basic.startDate=this.startData,e.basic.endDate=this.endData,e.basic.type="casco",e.osago.brand=this.offers.CarBrand.split("_")[0],e.osago.model=this.offers.CarModel.split("_")[0]+" "+this.offers.CarReleaseYear;for(var d=0;d<this.CASCOService.driver.length;++d){var f=this.CASCOService.driver[d];e.drivers.push(new b.DriverDetail(f.age,f.experience,f.isMale,f.kids,f.martialStatus))}this.$http.put("api/admin/casco",e).success(function(a){c.CASCOService.offerId=a.offerId,c.$state.go("casco.payment")})}},c.prototype.stringToFloat=function(a){var b=0,c=a.replace(",","."),d=c.replace(/ /g,""),e=d.replace(" ","").replace(String.fromCharCode(160),"");return b=parseFloat(e)},c}();b.CASCODetailsController=c,angular.module("nepereplaty").controller("nepereplaty.casco.CASCODetailsController",c)}(b=a.casco||(a.casco={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.$state=a,this.$q=b,this.CASCOService=c,null==this.CASCOService.getOffers()&&this.$state.go("home"),this.offers=this.CASCOService.getOffers(),this.offer=this.offers.Offers[this.CASCOService.offerIndex],this.osagoOffer=this.stringtoNumber(this.offer.osagoPrice),this.osagoInclude=!1,this.updata(),this.logoUrl=this.offers.Offers[this.CASCOService.offerIndex].Company.Logo,this.osagoOfferString=this.osagoOffer.toFixed(3);var d=(this.osagoOffer/1e3).toFixed(0).length;this.osagoOfferString=this.osagoOfferString.slice(0,d)+" "+this.osagoOfferString.slice(d,this.osagoOfferString.length-1),this.startData=this.offers.startData,this.endData=this.endData=this.offers.endData}return a.prototype.updata=function(){this.osagoInclude?this.puymentCost=this.stringtoNumber(this.offer.Price)+this.osagoOffer:this.puymentCost=this.stringtoNumber(this.offer.Price),this.puymentString=this.puymentCost.toFixed(3);var a=(this.puymentCost/1e3).toFixed(0).length;this.puymentString=this.puymentString.slice(0,a)+" "+this.puymentString.slice(a,this.puymentString.length-1)},a.prototype.stringtoNumber=function(a){var b=0,c=a.replace(",","."),d=c.replace(/ /g,""),e=d.replace(" ","").replace(String.fromCharCode(160),"");return b=parseFloat(e)},a.prototype.pay=function(){this.osagoInclude?this.CASCOService.totoalPrice=this.osagoOffer+this.stringtoNumber(this.offer.Price):this.CASCOService.totoalPrice=this.stringtoNumber(this.offer.Price),this.$state.go("casco.finish")},a}();a.CASCOPaymentController=b,angular.module("nepereplaty").controller("nepereplaty.casco.CASCOPaymentController",b)}(b=a.casco||(a.casco={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(a,b,c,d){this.$http=a,this.$state=b,this.$q=c,this.CASCOService=d,null==this.CASCOService.getOffers()&&this.$state.go("home"),this.offer=this.CASCOService.getOffers().Offers[this.CASCOService.offerIndex],this.data=this.CASCOService.buyerInfo,this.age=this.CASCOService.getOffers().DriversMinAge,this.orderNumber=this.CASCOService.offerId,this.startData=this.CASCOService.getOffers().startData,this.endData=this.CASCOService.getOffers().endData,this.price=this.CASCOService.totoalPrice,this.DriversCount=this.CASCOService.getOffers().DriversCount,this.priceString=this.price.toFixed(3);var e=(this.price/1e3).toFixed(0).length;this.priceString=this.priceString.slice(0,e)+" "+this.priceString.slice(e,this.priceString.length-1),this.$http.get("../api/admin/purchas/"+this.CASCOService.offerId+"/"+this.CASCOService.totoalPrice).success(function(a){console.log(a)})}return a.prototype.downloadPdf=function(){window.open("../../p/example.pdf")},a}();a.CASCOFinishController=b,angular.module("nepereplaty").controller("nepereplaty.casco.CASCOFinishController",b)}(b=a.casco||(a.casco={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i){this.$http=b,this.$state=c,this.$q=d,this.HOUSEService=e,this.$scope=f,this.ModalService=g,this.$timeout=h,this.$rootScope=i,this.insuranceStartMinData=new Date,this.submitValue="Получить предложение",this.wallsOptions=[{text:"Дерево",value:"1"},{text:"Камень",value:"0"}],this.AdditionalBuildingsOptions=[{text:"Баня/Сауна",value:"0"},{text:"Гараж",value:"1"},{text:"Сарай",value:"1"},{text:"Беседка",value:"1"},{text:"Забор",value:"2"}],this.estateCountModel=null,this.estatesCount=null,this.addEstatesCount=function(){this.estatesCount++,this.estatesCountChange()},this.estatesCountChange=function(){if(this.isNumeric(this.estatesCount)){if(this.estatesCount>this.houseInsuranceForm.AdditionalStructure.length)for(;this.estatesCount>this.houseInsuranceForm.AdditionalStructure.push(new a.AdditionalStructure););this.estatesCount<this.houseInsuranceForm.AdditionalStructure.length&&this.houseInsuranceForm.AdditionalStructure.splice(this.estatesCount,this.houseInsuranceForm.AdditionalStructure.length-this.estatesCount)}},this.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},this.yearBigValue=function(){var a=(new Date).getUTCFullYear();this.houseInsuranceForm.year>a&&(this.houseInsuranceForm.year=a)},this.dataOnTheProperty=!i.isMobile,this.houseInsuranceForm=new a.HOUSEForm,this.$rootScope.showFooter=!0,this.$rootScope.showBlindStopper=!1,this.showPeriodStart=!1,this.estatesCount=0,this.estatesCountChange(),this.getRegions(),this.insuranceStartMinData.setDate(this.insuranceStartMinData.getDate()-1)}return b.prototype.getRegions=function(){var a=this,b="api/handbook/region/";this.$http.get(b).success(function(b){console.log(a.regions),a.regions=b,console.log(a.regions)})},b.prototype.iscostIsLarg=function(){for(var a=0;a<this.houseInsuranceForm.AdditionalStructure.length;a++)this.houseInsuranceForm.AdditionalStructure[a].cost>2e5&&(this.houseInsuranceForm.AdditionalStructure[a].cost=null)},b.prototype.requestOffer=function(){var b=this;if("Получить предложение"===this.submitValue){
if(console.log(this.houseInsuranceForm.year<1965,this.houseInsuranceForm.year>2015,!this.houseInsuranceForm.region,null==this.houseInsuranceForm.cover.value),this.houseInsuranceForm.year<1965||this.houseInsuranceForm.year>2015||!this.houseInsuranceForm.region||null==this.houseInsuranceForm.cover.value)return;console.log("________");var c=new a.HOUSEForm;c.year=this.houseInsuranceForm.year,c.rent=this.houseInsuranceForm.rent,c.region=this.houseInsuranceForm.region.originalObject.value,c.cover=this.houseInsuranceForm.cover.value,c.startData=this.houseInsuranceForm.periodStart;for(var d=0;d<this.houseInsuranceForm.AdditionalStructure.length;++d){if(null==this.houseInsuranceForm.AdditionalStructure[d].type.value||!this.houseInsuranceForm.AdditionalStructure[d].cost||this.houseInsuranceForm.AdditionalStructure[d].cost>2e5)return;d>0&&(c.AdditionalStructures+=", "),c.AdditionalStructures+=this.houseInsuranceForm.AdditionalStructure[d].type.text,c.AdditionalStructure.push(new a.AdditionalStructure(this.houseInsuranceForm.AdditionalStructure[d].type.value,this.houseInsuranceForm.AdditionalStructure[d].cost))}this.submitValue="Поиск предложений ...",this.ModalService.showModal({templateUrl:"app/loading/loading.html",controller:"LoadingModalController",controllerAs:"loadingModalCtrl",inputs:{}}),window.scrollTo(0,0),this.HOUSEService.loadOffers(c).success(function(){b.$rootScope.dismissModal("loading"),b.$state.go("house.offer")})}},b}();a.HOUSEController=b,angular.module("nepereplaty").controller("nepereplaty.house.HOUSEController",b)}(b=a.house||(a.house={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(){this.additionalBuilding={text:"--",value:null},this.cost=null}return a}();a.Estate=b;var c=function(){function a(){this.submodule="",this.termInsurance="",this.AdditionalStructures="",this.name="",this.orderNumber="",this.insurancePolicy="",this.companyName="",this.startData="",this.endData="",this.address="",this.priceString="",this.city="",this.Price="",this.SumPrice="",this.Offers=h[2]}return a}();a.HOUSEOffer=c;var d=function(){function a(){this.AdditionalStructure=[],this.periodStart=new Date,this.cover={text:"--",value:null},this.AdditionalStructures=""}return a}();a.HOUSEForm=d;var e=function(){function a(a,b){void 0===a&&(a=null),void 0===b&&(b=null),null==a?this.type={value:null,text:"--"}:this.type=a,this.cost=b}return a}();a.AdditionalStructure=e;var f=function(){function a(){this.isAgreed=!1,this.rent=null,this.cityNumber=null,this.walls={text:"--",value:null},this.addBuilding={text:"--",value:null},this.coveringStatus={text:"--",value:null},this.periodStart=new Date,this.releaseYearIsLarge=!1,this.estates=[]}return a}();a.HouseInsuranceForm=f;var g=function(){function a(){}return a}();a.InsuracneCompany=g;var h=function(){function a(){this.AdditionalOptions=[],this.IsShown=!1,this.isCompair=!1}return a}();a.HOUSEInsuracneOffer=h;var i=function(){function a(){}return a}();a.HOUSEInsuranceOffers=i;var j=function(){function a(a,b){this.Name=a,this.Description=b}return a}();a.AdditionalOption=j;var k=function(){function a(){this.IsMale=0,this.Birthday=new Date,this.MobileCode={text:"--",value:null},this.TelephoneCode={text:"--",value:null},this.drivers=[],this.PassportnNumber=null,this.PassportSerial=null,this.PassportWhere=null,this.PassportWhen=null,this.PassportIssued=null,this.Region=null,this.InformationCity=null,this.FullAdress=null,this.Coincidence=null,this.City=null,this.Adress=null}return a}();a.HOUSEDetailsForm=k;var l=function(){function a(){this.number=null,this.year=null}return a}();a.DriversLicense=l;var m=function(){function a(){}return a}();a.OtherAdress=m;var n=function(){function a(){this.basic=new o,this.home=new p}return a}();a.ApartmentOfferModel=n;var o=function(){function a(){this.offerId=0,this.dataId=0}return a}();a.Basic=o;var p=function(){function a(){this.offerId=0}return a}();a.ApartmentDetail=p;var q=function(){function a(a,b,c){this.$http=a,this.$q=b,this.$timeout=c,this.offerIndex=null,this.otherAndress=new m,this.otherAndress.isAre=!1}return a.prototype.getOffers=function(){return this.offers},a.prototype.getAdditional=function(){return this.AdditionalOptions},a.prototype.loadOffers=function(a){var b=this;return this.$http.post("api/house/insuranceoffer",a).success(function(a){b.offers=a,console.log(b.offers)})},a}();a.HOUSEService=q,angular.module("nepereplaty").service("HOUSEService",q)}(b=a.house||(a.house={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(a,b,c,d){this.$state=a,this.$q=b,this.HOUSEService=c,this.$rootScope=d,null==this.HOUSEService.getOffers()&&this.$state.go("home"),this.canCompare=!1,this.content=this.HOUSEService.getOffers(),this.content.submodule="Дом",this.content.termInsurance="1 год",this.startData=this.content.startData;this.startData.split("-");this.startData=this.content.startData,this.endData=this.content.endData,this.showMargin=d.isMobile;for(var e="",f=0;f<this.content.Offers.length;++f){e=this.content.Offers[f].Total_SP.toFixed(3);var g=Math.floor(this.content.Offers[f].Total_SP/1e3).toFixed(0).length;e=e.slice(0,g)+" "+e.slice(g,e.length-1),this.content.Offers[f].Price=e}}return b.prototype.generationOffer=function(b,c,d,e){var f=new a.HOUSEInsuracneOffer;return f.Company=new a.InsuracneCompany,f.Name=b,f.Company.Logo=c,f.Company.Name=d,f.Company.Price=e,console.log(f.AdditionalOptions),f.AdditionalOptions=[],f.AdditionalOptions.push(new a.AdditionalOption(b+" _ 1",b+" Description 1")),f.AdditionalOptions.push(new a.AdditionalOption(b+" _ 2",b+" Description 2")),console.log(f.AdditionalOptions),f},b.prototype.buyOffer=function(a){this.HOUSEService.offerIndex=a,this.HOUSEService.totoalPrice=this.HOUSEService.getOffers().Offers[a].Total_SP,this.$state.go("house.details")},b.prototype.onClickCompareChackBox=function(){for(var a,b=[],c=0;c<this.content.Offers.length;++c)a=this.content.Offers[c],a.isCompair&&b.push(c);b.length>=2?this.canCompare=!0:this.canCompare=!1,console.log(this.canCompare),console.log(b)},b.prototype.compare=function(){this.canCompare&&this.$state.go("house.compare")},b}();a.HOUSEOfferController=b,angular.module("nepereplaty").controller("nepereplaty.house.HOUSEOfferController",b)}(b=a.house||(a.house={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d){this.$state=b,this.$q=c,this.HOUSEService=d,this.content=new a.HOUSEOffer,this.content=this.HOUSEService.getOffers(),this.content.submodule="Дом",this.content.termInsurance="1 год",this.startData=this.content.startData;var e=this.startData.split("-");this.startData=e[2]+"."+e[1]+"."+e[0]}return b.prototype.back=function(){console.log("________________________________==================="),this.$state.go("house.offer")},b.prototype.openPdf=function(){window.open("../../p/example.pdf")},b}();a.HOUSECompareController=b,angular.module("nepereplaty").controller("nepereplaty.house.HOUSECompareController",b)}(b=a.house||(a.house={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j){var k=this;this.$http=b,this.$state=c,this.$q=d,this.HOUSEService=e,this.auth=f,this.$scope=g,this.account=h,this.$rootScope=i,this.ModalService=j,this.content=new a.HOUSEOffer,this.telCode=[{text:"+7",value:"007"},{text:"+1",value:"001"},{text:"+33",value:"0033"},{text:"+374",value:"00374"},{text:"+25",value:"0024"},{text:"+908",value:"00908"}],null==this.HOUSEService.getOffers()&&this.$state.go("home"),this.content=this.HOUSEService.getOffers(),this.content.submodule="Дом",this.content.termInsurance="1 год",this.userData=new a.HOUSEDetailsForm,this.logoUrl=this.content.Offers[this.HOUSEService.offerIndex].Company.Logo,this.startData=this.content.startData;this.startData.split("-");this.startData=this.content.startData,this.endData=this.content.endData,this.minDate=new Date,this.minDate.setFullYear(1926),this.personalData=!i.isMobile,this.passportData=!i.isMobile,this.propertyDetails=!i.isMobile,this.auth.getUserId()?h.getAccount().then(function(a){k.manageData=a,k.setData()}):this.login(),this.getRegions()}return b.prototype.getRegions=function(){var a=this,b="api/handbook/region/";this.$http.get(b).success(function(b){console.log(a.regions),a.regions=b,console.log(a.regions)})},b.prototype.register=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/register.html",controller:"RegisterModalController",controllerAs:"registerModalCtrl",inputs:{name:"house"}}).then(function(b){b.close.then(function(b){"login"===b?a.login():("registered"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},b.prototype.login=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/login.html",controller:"LoginModalController",controllerAs:"loginModalCtrl",inputs:{name:"house"}}).then(function(b){b.close.then(function(b){"register"===b?a.register():("logedin"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},b.prototype.editAccount=function(){var a=this;this.account.editAccount(this.manageData).then(function(b){a.account.getAccount().then(function(b){a.manageData=b,a.setData()})})},b.prototype.updateMiddle=function(){this.validate(this.userData.Name)&&this.validate(this.userData.Surname)?this.isMiddle=!0:this.isMiddle=!1},b.prototype.validate=function(a){var b=/^[a-zA-Z ]+$/;return b.test(a)},b.prototype.setData=function(){this.userData.Adress=this.manageData.Adress,this.userData.Birthday=this.manageData.Birthday,this.userData.City=this.manageData.City,this.userData.Email=this.manageData.Email,this.userData.IsMale=this.manageData.IsMale?1:2,this.userData.Middlename=this.manageData.Middlename,this.userData.Name=this.manageData.Name,this.userData.PassportIssued=this.manageData.PassportIssued,this.userData.PassportnNumber=this.manageData.PassportnNumber,this.userData.PassportSerial=this.manageData.PassportSerial,this.userData.PassportWhen=this.manageData.PassportWhen,this.userData.PassportWhere=this.manageData.PassportWhere,this.userData.Surname=this.manageData.Surname,this.userData.Mobile=Number(this.manageData.Mobile),this.userData.Telephone=Number(this.manageData.Telephone),this.manageData.MobileCode?null!=this.manageData.MobileCode.text?this.userData.MobileCode=this.manageData.MobileCode:this.userData.MobileCode={text:this.manageData.MobileCode,value:this.manageData.MobileCode}:this.userData.MobileCode={text:"--",value:null},this.manageData.TelephoneCode?null!=this.manageData.TelephoneCode.text?this.userData.TelephoneCode=this.manageData.TelephoneCode:this.userData.TelephoneCode={text:this.manageData.TelephoneCode,value:this.manageData.TelephoneCode}:this.userData.TelephoneCode={text:"--",value:null},this.updateMiddle()},b.prototype.requestBuyOffer=function(){var b=this;if(console.log(this.userData),this.pasportWhere&&(this.userData.PassportWhere=this.pasportWhere.title),this.city&&(this.userData.City=this.city.title),null!=this.userData.Adress&&null!=this.userData.City&&null!=this.userData.Email&&null!=this.userData.IsMale&&null!=this.userData.Name&&null!=this.userData.PassportIssued&&null!=this.userData.PassportnNumber&&null!=this.userData.PassportSerial&&null!=this.userData.PassportWhere&&null!=this.userData.Coincidence&&null!=this.userData.Surname&&null!=this.userData.Mobile&&null!=this.userData.Telephone&&void 0!==this.userData.PassportWhen&&(this.isMiddle||null!=this.userData.Middlename)){if(this.HOUSEService.otherAndress.isAre=!1,"false"===this.userData.Coincidence){if(null==this.userData.Region||null==this.userData.InformationCity||null==this.userData.FullAdress)return;this.HOUSEService.otherAndress.isAre=!0,this.HOUSEService.otherAndress.region=this.userData.Region.originalObject.value,this.HOUSEService.otherAndress.city=this.userData.InformationCity.title,this.HOUSEService.otherAndress.adress=this.userData.FullAdress}"true"===this.userData.Coincidence&&(this.HOUSEService.otherAndress.region=this.userData.Region,this.HOUSEService.otherAndress.city=this.userData.City,this.HOUSEService.otherAndress.adress=this.userData.Adress),this.manageData.Adress=this.userData.Adress,this.manageData.Birthday=this.userData.Birthday,this.manageData.City=this.userData.City,this.manageData.Email=this.userData.Email,this.manageData.IsMale=1===this.userData.IsMale?!0:!1,this.manageData.Middlename=this.userData.Middlename,this.manageData.Name=this.userData.Name,this.manageData.PassportIssued=this.userData.PassportIssued,this.manageData.PassportnNumber=this.userData.PassportnNumber,this.manageData.PassportSerial=this.userData.PassportSerial,this.manageData.PassportWhen=this.userData.PassportWhen,this.manageData.PassportWhere=this.userData.PassportWhere,this.manageData.Surname=this.userData.Surname,this.manageData.Mobile=this.userData.Mobile,this.manageData.Telephone=this.userData.Telephone,this.manageData.MobileCode=this.userData.MobileCode.value,this.manageData.TelephoneCode=this.userData.TelephoneCode.value,this.editAccount(),this.HOUSEService.buyerInfo=this.userData;var c=new a.ApartmentOfferModel;c.basic.cost=this.HOUSEService.totoalPrice,c.basic.type="house",c.basic.buyer=this.userData.Email,c.basic.comments="",c.basic.companyId=this.content.Offers[this.HOUSEService.offerIndex].Company.Id,c.basic.endDate=this.content.endData,c.basic.startDate=this.content.startData,c.home.address=this.HOUSEService.otherAndress.adress,c.home.city=this.HOUSEService.otherAndress.city,c.home.region=this.HOUSEService.otherAndress.region,this.$http.put("api/admin/home",c).success(function(a){b.HOUSEService.offerId=a.offerId,b.$state.go("house.payment")})}},b}();a.HOUSEDetailsController=b,angular.module("nepereplaty").controller("nepereplaty.house.HOUSEDetailsController",b)}(b=a.house||(a.house={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d){this.$state=b,this.$q=c,this.HOUSEService=d,this.content=new a.HOUSEOffer,this.additianalPay=[{b:!1,c:700,s:"700"},{b:!1,c:1e3,s:"1 000"}],null==this.HOUSEService.getOffers()&&this.$state.go("home"),this.content=this.HOUSEService.getOffers(),this.content.submodule="Дом",this.content.termInsurance="1 год",this.logoUrl=this.content.Offers[this.HOUSEService.offerIndex].Company.Logo,this.offer=this.content.Offers[this.HOUSEService.offerIndex];var e=this.content.Offers[this.HOUSEService.offerIndex].Total_SP.toFixed(3),f=(this.content.Offers[this.HOUSEService.offerIndex].Total_SP/1e3).toFixed(0).length;e=e.slice(0,f)+" "+e.slice(f,e.length-1),this.content.Price=this.content.Offers[this.HOUSEService.offerIndex].Total_SP.toFixed(3),this.content.priceString=e,this.startData=this.content.startData,this.endData=this.content.endData}return b.prototype.updata=function(){for(var a=0,b=0;2>b;++b)this.additianalPay[b].b&&(a+=this.additianalPay[b].c);a>0?(this.add=!0,this.puymentCost=this.stringtoNumber(this.offer.Price)+a):(this.add=!1,this.puymentCost=this.stringtoNumber(this.offer.Price)),this.puymentString=this.puymentCost.toFixed(3);var c=Math.floor(this.puymentCost/1e3).toFixed(0).length;this.puymentString=this.puymentString.slice(0,c)+" "+this.puymentString.slice(c,this.puymentString.length-1),this.additianalPayString=a.toFixed(3),c=(a/1e3).toFixed(0).length,this.additianalPayString=this.additianalPayString.slice(0,c)+" "+this.additianalPayString.slice(c,this.additianalPayString.length-1)},b.prototype.stringtoNumber=function(a){var b=0,c=a.replace(",","."),d=c.replace(/ /g,""),e=d.replace(" ","").replace(String.fromCharCode(160),"");return b=parseFloat(e)},b.prototype.pay=function(){for(var a=0,b=0;2>b;++b)this.additianalPay[b].b&&(a+=this.additianalPay[b].c);a>0?this.puymentCost=this.stringtoNumber(this.offer.Price)+a:this.puymentCost=this.stringtoNumber(this.offer.Price),this.HOUSEService.totoalPrice=this.puymentCost,this.$state.go("house.finish")},b}();a.HOUSEPaymentController=b,angular.module("nepereplaty").controller("nepereplaty.house.HOUSEPaymentController",b)}(b=a.house||(a.house={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e){this.$http=b,this.$state=c,this.$q=d,this.HOUSEService=e,this.content=new a.HOUSEOffer,null==this.HOUSEService.getOffers()&&this.$state.go("home"),this.offer=this.HOUSEService.getOffers().Offers[this.HOUSEService.offerIndex],this.data=this.HOUSEService.buyerInfo,this.orderNumber=5,this.startData=this.content.startData,this.endData=this.content.endData,this.price=this.HOUSEService.totoalPrice,this.priceString=this.price.toFixed(3);var f=(this.price/1e3).toFixed(0).length;this.priceString=this.priceString.slice(0,f)+" "+this.priceString.slice(f,this.priceString.length-1),this.content.name=this.data.Name+" "+this.data.Surname,this.content.orderNumber=this.HOUSEService.offerId.toString(),this.content.insurancePolicy=this.offer.Company.Name+" СТРАХОВАНИЕ",this.content.companyName=this.offer.Company.Name,this.content.startData=this.HOUSEService.getOffers().startData,this.content.endData=this.HOUSEService.getOffers().endData,this.content.submodule="Дом",this.content.priceString=this.priceString,this.HOUSEService.otherAndress.isAre?(this.content.city=this.HOUSEService.otherAndress.city,this.content.address=this.HOUSEService.otherAndress.adress):(this.content.city=this.data.City,this.content.address=this.data.Adress),this.$http.get("../api/admin/purchas/"+this.content.orderNumber+"/"+this.HOUSEService.totoalPrice).success(function(a){console.log(a)})}return b.prototype.downloadPdf=function(){window.open("../../p/example.pdf")},b}();a.HOUSEFinishController=b,angular.module("nepereplaty").controller("nepereplaty.house.HOUSEFinishController",b)}(b=a.house||(a.house={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i){var j=this;this.$http=b,this.$state=c,this.$q=d,this.APARTMENTService=e,this.$scope=f,this.ModalService=g,this.$timeout=h,this.$rootScope=i,this.insuranceStartMinData=new Date,this.submitValue="Получить предложение",this.regions=[{text:"Москва и МО, Санкт-Петербург и ЛО",value:0},{text:"Другой регион",value:1}],this.countryOptions=[{text:"Первый регион",value:"1"},{text:"Второй регион",value:"2"},{text:"Третий регион",value:"3"}],this.insuranceStartMinData.setDate(this.insuranceStartMinData.getDate()-1),this.$rootScope.showFooter=!0,this.$rootScope.showBlindStopper=!1,this.apartmentForm=new a.APARTMENTForm,this.showPeriodStart=!1,this.dataOnTheProperty=!i.isMobile,this.$http.get("api/handbook/country").success(function(a){j.countryOptions=a})}return b.prototype.requestOffer=function(){var b=this;if("Получить предложение"===this.submitValue){if(null==this.apartmentForm.area||null==this.apartmentForm.property||null==this.apartmentForm.region.value||null==this.apartmentForm.rent||null==this.apartmentForm.startData||null==this.apartmentForm.sum)return;var c=new a.APARTMENTForm;c.area=this.apartmentForm.area,c.property=this.apartmentForm.property,c.region=this.apartmentForm.region.value,c.rent=this.apartmentForm.rent,c.startData=this.apartmentForm.startData,c.sum=this.apartmentForm.sum,console.log(c),this.submitValue="Поиск предложений ...",this.ModalService.showModal({templateUrl:"app/loading/loading.html",controller:"LoadingModalController",controllerAs:"loadingModalCtrl",inputs:{}}),window.scrollTo(0,0),this.APARTMENTService.loadOffers(c).success(function(){b.$rootScope.dismissModal("loading"),b.$state.go("apartment.offer")})}},b}();a.APARTMENTController=b,angular.module("nepereplaty").controller("nepereplaty.apartment.APARTMENTController",b)}(b=a.apartment||(a.apartment={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(){this.submodule="",this.termInsurance="",this.AdditionalStructures="",this.name="",this.orderNumber="",this.insurancePolicy="",this.companyName="",this.startData="",this.endData="",this.address="",this.priceString="",this.city="",this.Price="",this.SumPrice="",this.Offers=g[2]}return a}();a.APARTMENTOffer=b;var c=function(){function a(){this.basic=new d,this.home=new e}return a}();a.ApartmentOfferModel=c;var d=function(){function a(){this.offerId=0,this.dataId=0}return a}();a.Basic=d;var e=function(){function a(){this.offerId=0}return a}();a.ApartmentDetail=e;var f=function(){function a(){this.id=0,this.name="name",this.surName="surName",this.middleName="middleName",this.age=36}return a}();a.InsuredModel=f;var g=function(){function a(){this.AdditionalOptions=[],this.IsShown=!1,this.isCompair=!1}return a}();a.APARTMENTInsuracneOffer=g;var h=function(){function a(){}return a}();a.InsuracneCompany=h;var i=function(){function a(){}return a}();a.APARTMENTInsuranceOffers=i;var j=function(){function a(a,b){this.Name=a,this.Description=b}return a}();a.AdditionalOption=j;var k=function(){function a(){this.IsMale=0,this.Birthday=new Date,this.MobileCode={text:"--",value:null},this.TelephoneCode={text:"--",value:null},this.PassportnNumber=null,this.PassportSerial=null,this.PassportWhere=null,this.PassportWhen=null,this.PassportIssued=null,this.Region=null,this.InformationCity=null,this.FullAdress=null,this.Coincidence=null,this.City=null,this.Adress=null}return a}();a.APARTMENTDetailsForm=k;var l=function(){function a(){this.startData=new Date,this.region={text:"--",value:null}}return a}();a.APARTMENTForm=l;var m=function(){function a(){}return a}();a.OtherAdress=m;var n=function(){function a(a,b,c){this.$http=a,this.$q=b,this.$timeout=c,this.offerIndex=null,this.otherAndress=new m,this.otherAndress.isAre=!1}return a.prototype.getOffers=function(){return this.offers},a.prototype.loadOffers=function(a){var b=this;return this.$http.post("api/apartment/insuranceoffer",a).success(function(a){console.log(a),b.offers=a,console.log(b.offers)})},a}();a.APARTMENTService=n,angular.module("nepereplaty").service("APARTMENTService",n)}(b=a.apartment||(a.apartment={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e){this.$state=b,this.$q=c,this.APARTMENTService=d,this.$rootScope=e,this.content=new a.APARTMENTOffer,null==this.APARTMENTService.getOffers()&&this.$state.go("home"),this.canCompare=!1,this.content=this.APARTMENTService.getOffers(),this.content.submodule="Квартира",this.content.termInsurance="1 год",this.startData=this.content.startData,this.endData=this.content.endData,this.showMargin=e.isMobile;for(var f="",g=0;g<this.content.Offers.length;++g){f=this.content.Offers[g].Total_SP.toFixed(3);var h=Math.floor(this.content.Offers[g].Total_SP/1e3).toFixed(0).length;f=f.slice(0,h)+" "+f.slice(h,f.length-1),this.content.Offers[g].Price=f}console.log(this.content.Offers)}return b.prototype.buyOffer=function(a){this.APARTMENTService.offerIndex=a,this.APARTMENTService.totoalPrice=this.APARTMENTService.getOffers().Offers[a].Total_SP,this.$state.go("apartment.details")},b.prototype.onClickCompareChackBox=function(){var a,b=[];console.log(b);for(var c=0;c<this.content.Offers.length;++c)a=this.content.Offers[c],a.isCompair&&b.push(c);b.length>=2?this.canCompare=!0:this.canCompare=!1},b.prototype.compare=function(){this.canCompare&&this.$state.go("apartment.compare")},b}();a.APARTMENTOfferController=b,angular.module("nepereplaty").controller("nepereplaty.apartment.APARTMENTOfferController",b)}(b=a.apartment||(a.apartment={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d){this.$state=b,this.$q=c,this.APARTMENTService=d,this.content=new a.APARTMENTOffer,this.content=this.APARTMENTService.getOffers(),this.content.submodule="Квартира",this.content.termInsurance="1 год",this.startData=this.content.startData;var e=this.startData.split("-");this.startData=e[2]+"."+e[1]+"."+e[0]}return b.prototype.back=function(){this.$state.go("apartment.offer")},b}();a.APARTMENTCompareController=b,angular.module("nepereplaty").controller("nepereplaty.apartment.APARTMENTCompareController",b)}(b=a.apartment||(a.apartment={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j){var k=this;this.$http=b,this.$state=c,this.$q=d,this.APARTMENTService=e,this.auth=f,this.$scope=g,this.account=h,this.$rootScope=i,this.ModalService=j,this.content=new a.APARTMENTOffer,this.telCode=[{text:"+7",value:"007"},{text:"+1",value:"001"},{text:"+33",value:"0033"},{text:"+374",value:"00374"},{text:"+25",value:"0024"},{text:"+908",value:"00908"}],null==this.APARTMENTService.getOffers()&&this.$state.go("home"),this.content=this.APARTMENTService.getOffers(),this.content.submodule="Квартира",this.content.termInsurance="1 год",this.logoUrl=this.content.Offers[this.APARTMENTService.offerIndex].Company.Logo,this.userData=new a.APARTMENTDetailsForm,this.personalData=!i.isMobile,this.passportData=!i.isMobile,this.propertyDetails=!i.isMobile,this.startData=this.content.startData,this.endData=this.content.endData,this.minDate=new Date,this.minDate.setFullYear(1926),this.auth.getUserId()?h.getAccount().then(function(a){k.manageData=a,k.setData()}):this.login(),this.getRegions()}return b.prototype.getRegions=function(){var a=this,b="api/handbook/region/";this.$http.get(b).success(function(b){console.log(a.regions),a.regions=b,console.log(a.regions)})},b.prototype.register=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/register.html",controller:"RegisterModalController",controllerAs:"registerModalCtrl",inputs:{name:"apartment"}}).then(function(b){b.close.then(function(b){"login"===b?a.login():("registered"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},b.prototype.login=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/login.html",controller:"LoginModalController",controllerAs:"loginModalCtrl",inputs:{name:"apartment"}}).then(function(b){b.close.then(function(b){"register"===b?a.register():("logedin"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},b.prototype.editAccount=function(){var a=this;this.account.editAccount(this.manageData).then(function(b){a.account.getAccount().then(function(b){a.manageData=b,a.setData()})})},b.prototype.updateMiddle=function(){console.log(this.validate(this.userData.Name)&&this.validate(this.userData.Surname)),this.validate(this.userData.Name)&&this.validate(this.userData.Surname)?this.isMiddle=!0:this.isMiddle=!1},b.prototype.validate=function(a){var b=/^[a-zA-Z]+$/;return b.test(a)},b.prototype.setData=function(){this.userData.Adress=this.manageData.Adress,this.userData.Birthday=this.manageData.Birthday,this.userData.City=this.manageData.City,this.userData.Email=this.manageData.Email,this.userData.IsMale=this.manageData.IsMale?1:2,this.userData.Middlename=this.manageData.Middlename,this.userData.Name=this.manageData.Name,this.userData.PassportIssued=this.manageData.PassportIssued,this.userData.PassportnNumber=this.manageData.PassportnNumber,this.userData.PassportSerial=this.manageData.PassportSerial,this.userData.PassportWhen=this.manageData.PassportWhen,this.userData.PassportWhere=this.manageData.PassportWhere,this.userData.Surname=this.manageData.Surname,this.userData.Mobile=Number(this.manageData.Mobile),this.userData.Telephone=Number(this.manageData.Telephone),this.manageData.MobileCode?null!=this.manageData.MobileCode.text?this.userData.MobileCode=this.manageData.MobileCode:this.userData.MobileCode={text:this.manageData.MobileCode,value:this.manageData.MobileCode}:this.userData.MobileCode={text:"--",value:null},this.manageData.TelephoneCode?null!=this.manageData.TelephoneCode.text?this.userData.TelephoneCode=this.manageData.TelephoneCode:this.userData.TelephoneCode={text:this.manageData.TelephoneCode,value:this.manageData.TelephoneCode}:this.userData.TelephoneCode={text:"--",value:null},this.updateMiddle()},b.prototype.requestBuyOffer=function(){var b=this;if(console.log(this.userData),this.pasportWhere&&(this.userData.PassportWhere=this.pasportWhere.title),this.city&&(this.userData.City=this.city.title),null!=this.userData.Adress&&null!=this.userData.City&&null!=this.userData.Email&&null!=this.userData.IsMale&&null!=this.userData.Name&&null!=this.userData.PassportIssued&&null!=this.userData.PassportnNumber&&null!=this.userData.PassportSerial&&null!=this.userData.PassportWhere&&null!=this.userData.Coincidence&&null!=this.userData.Surname&&null!=this.userData.Mobile&&null!=this.userData.Telephone&&void 0!==this.userData.PassportWhen&&(this.isMiddle||null!=this.userData.Middlename)){if(this.APARTMENTService.otherAndress.isAre=!1,"false"===this.userData.Coincidence){if(null==this.userData.Region||null==this.userData.InformationCity||null==this.userData.FullAdress)return;this.APARTMENTService.otherAndress.isAre=!0,this.APARTMENTService.otherAndress.region=this.userData.Region.originalObject.value,this.APARTMENTService.otherAndress.city=this.userData.InformationCity,this.APARTMENTService.otherAndress.adress=this.userData.FullAdress}"true"===this.userData.Coincidence&&(this.APARTMENTService.otherAndress.region=this.userData.Region,this.APARTMENTService.otherAndress.city=this.userData.City,this.APARTMENTService.otherAndress.adress=this.userData.Adress),this.manageData.Adress=this.userData.Adress,this.manageData.Birthday=this.userData.Birthday,this.manageData.City=this.userData.City,this.manageData.Email=this.userData.Email,this.manageData.IsMale=1===this.userData.IsMale?!0:!1,this.manageData.Middlename=this.userData.Middlename,this.manageData.Name=this.userData.Name,this.manageData.PassportIssued=this.userData.PassportIssued,this.manageData.PassportnNumber=this.userData.PassportnNumber,this.manageData.PassportSerial=this.userData.PassportSerial,this.manageData.PassportWhen=this.userData.PassportWhen,this.manageData.PassportWhere=this.userData.PassportWhere,this.manageData.Surname=this.userData.Surname,this.manageData.Mobile=this.userData.Mobile,this.manageData.Telephone=this.userData.Telephone,this.manageData.MobileCode=this.userData.MobileCode.value,this.manageData.TelephoneCode=this.userData.TelephoneCode.value,this.editAccount(),this.APARTMENTService.buyerInfo=this.userData;var c=new a.ApartmentOfferModel;c.basic.cost=this.APARTMENTService.totoalPrice,c.basic.type="apartment",c.basic.buyer=this.userData.Email,c.basic.comments="",c.basic.companyId=this.content.Offers[this.APARTMENTService.offerIndex].Company.Id,c.basic.endDate=this.content.endData,c.basic.startDate=this.content.startData,c.home.address=this.APARTMENTService.otherAndress.adress,c.home.city=this.APARTMENTService.otherAndress.city,c.home.region=this.APARTMENTService.otherAndress.region,this.$http.put("api/admin/home",c).success(function(a){b.APARTMENTService.offerId=a.offerId,b.$state.go("apartment.payment")})}},b}();a.APARTMENTDetailsController=b,angular.module("nepereplaty").controller("nepereplaty.apartment.APARTMENTDetailsController",b)}(b=a.apartment||(a.apartment={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d){this.$state=b,this.$q=c,this.APARTMENTService=d,this.content=new a.APARTMENTOffer,this.additianalPay=[{b:!1,c:700,s:"700"},{b:!1,c:1e3,s:"1 000"}],null==this.APARTMENTService.getOffers()&&this.$state.go("home"),this.content=this.APARTMENTService.getOffers(),this.content.submodule="Дом",this.content.termInsurance="1 год",this.logoUrl=this.content.Offers[this.APARTMENTService.offerIndex].Company.Logo,this.offer=this.content.Offers[this.APARTMENTService.offerIndex];var e=this.content.Offers[this.APARTMENTService.offerIndex].Total_SP.toFixed(3),f=(this.content.Offers[this.APARTMENTService.offerIndex].Total_SP/1e3).toFixed(0).length;
e=e.slice(0,f)+" "+e.slice(f,e.length-1),this.content.Price=this.content.Offers[this.APARTMENTService.offerIndex].Total_SP.toFixed(3),this.content.priceString=e,this.startData=this.content.startData,this.endData=this.content.endData,this.updata()}return b.prototype.updata=function(){for(var a=0,b=0;2>b;++b)this.additianalPay[b].b&&(a+=this.additianalPay[b].c);a>0?(this.add=!0,this.puymentCost=this.stringtoNumber(this.offer.Price)+a):(this.add=!1,this.puymentCost=this.stringtoNumber(this.offer.Price)),this.puymentString=this.puymentCost.toFixed(3);var c=Math.floor(this.puymentCost/1e3).toFixed(0).length;this.puymentString=this.puymentString.slice(0,c)+" "+this.puymentString.slice(c,this.puymentString.length-1),this.additianalPayString=a.toFixed(3),c=(a/1e3).toFixed(0).length,this.additianalPayString=this.additianalPayString.slice(0,c)+" "+this.additianalPayString.slice(c,this.additianalPayString.length-1)},b.prototype.stringtoNumber=function(a){var b=0,c=a.replace(",","."),d=c.replace(/ /g,""),e=d.replace(" ","").replace(String.fromCharCode(160),"");return b=parseFloat(e)},b.prototype.pay=function(){for(var a=0,b=0;2>b;++b)this.additianalPay[b].b&&(a+=this.additianalPay[b].c);a>0?this.puymentCost=this.stringtoNumber(this.offer.Price)+a:this.puymentCost=this.stringtoNumber(this.offer.Price),this.APARTMENTService.totoalPrice=this.puymentCost,this.$state.go("apartment.finish")},b}();a.APARTMENTPaymentController=b,angular.module("nepereplaty").controller("nepereplaty.apartment.APARTMENTPaymentController",b)}(b=a.apartment||(a.apartment={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e){this.$http=b,this.$state=c,this.$q=d,this.APARTMENTService=e,this.content=new a.APARTMENTOffer,null==this.APARTMENTService.getOffers()&&this.$state.go("home"),this.offer=this.APARTMENTService.getOffers().Offers[this.APARTMENTService.offerIndex],this.data=this.APARTMENTService.buyerInfo,this.orderNumber=5,this.startData=this.APARTMENTService.getOffers().startData,this.endData=this.APARTMENTService.getOffers().endData,this.price=this.APARTMENTService.totoalPrice,this.priceString=this.price.toFixed(3);var f=(this.price/1e3).toFixed(0).length;this.priceString=this.priceString.slice(0,f)+" "+this.priceString.slice(f,this.priceString.length-1),this.content.name=this.data.Name+" "+this.data.Surname,this.content.orderNumber=this.APARTMENTService.offerId.toString(),this.content.insurancePolicy=this.offer.Company.Name+" СТРАХОВАНИЕ",this.content.companyName=this.offer.Company.Name,this.content.startData=this.startData,this.content.endData=this.endData,this.content.submodule="Квартира",this.content.priceString=this.priceString,this.APARTMENTService.otherAndress.isAre?(this.content.city=this.APARTMENTService.otherAndress.city,this.content.address=this.APARTMENTService.otherAndress.adress):(this.content.city=this.data.City,this.content.address=this.data.Adress),this.$http.get("../api/admin/purchas/"+this.content.orderNumber+"/"+this.APARTMENTService.totoalPrice).success(function(a){console.log(a)})}return b.prototype.downloadPdf=function(){window.open("../../p/example.pdf")},b}();a.APARTMENTFinishController=b,angular.module("nepereplaty").controller("nepereplaty.apartment.APARTMENTFinishController",b)}(b=a.apartment||(a.apartment={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i){var j=this;this.$http=b,this.$state=c,this.$q=d,this.TRAVELINGService=e,this.$scope=f,this.ModalService=g,this.$timeout=h,this.$rootScope=i,this.submitValue="Получить предложение",this.regionOptions=[{text:"Первый регион",value:"1"},{text:"Второй регион",value:"2"},{text:"Третий регион",value:"3"}],this.insuranceOptions=[{text:"Разовая",value:1},{text:"Многократная на год",value:2}],this.durationOptions=[{text:"Не более 30 дней",value:30},{text:"Не более 90 дней",value:90}],this.currencyAndSumOptions=[{text:"Евро",value:"EUR"},{text:"Доллар",value:"USD"}],this.insuredOptions=[{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"}],this.countryOptions=[{text:"Первый регион",value:"1"},{text:"Второй регион",value:"2"},{text:"Третий регион",value:"3"}],this.insuredCountModel=null,this.insuredsCount=null,this.birthdaysValid=!1,this.addInsuredrsCount=function(){this.insuredsCount++,this.insuredsCountChange()},this.insuredsCountChange=function(){if(this.insuredsCount=this.insuredCountModel.value,this.insuredsCount>5&&(this.insuredsCount=0),console.log(this.travelingInsuranceForm.insureds),this.isNumeric(this.insuredsCount)){if(this.insuredsCount>this.travelingInsuranceForm.insureds.length)for(;this.insuredsCount>this.travelingInsuranceForm.insureds.push(new a.Insured););this.insuredsCount<this.travelingInsuranceForm.insureds.length&&this.travelingInsuranceForm.insureds.splice(this.insuredsCount,this.travelingInsuranceForm.insureds.length-this.insuredsCount)}this.updataBirths()},this.countryCountModel=null,this.countriesCount=null,this.addCountriesCount=function(){this.countriesCount++,this.countriesCountChange()},this.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},this.$rootScope.showFooter=!0,this.$rootScope.showBlindStopper=!1,this.dataOnInsured=!i.isMobile,this.dataTravel=!i.isMobile,this.protectionAdditionalRisks=!i.isMobile,this.travelingInsuranceForm=new a.TRAVELINGForm,this.showPeriodStart=!1,this.showPeriodFinish=!1,this.countriesCount=1,this.countriesCountChange(),this.insuredCountModel={text:"1",value:"1"},this.insuredsCountChange(),f.vm=this,console.log(close),this.minStartData=new Date,this.minStartData.setDate(this.minStartData.getDate()+2),this.minEndData=new Date(this.minStartData.getFullYear(),this.minStartData.getMonth(),this.minStartData.getDate()+7),this.BirthDate=new Date(1926,this.minStartData.getMonth(),this.minStartData.getDate()),this.$http.get("api/handbook/country").success(function(a){j.countryOptions=a})}return b.prototype.countryFunc=function(a){$("#travelingCtrl_travelingInsuranceForm_city"+a+"_dropdown").hide(),setTimeout(function(){$("#travelingCtrl_travelingInsuranceForm_city"+a+"_dropdown").show()},10)},b.prototype.updataBirths=function(){if(this.birthdaysValid=!1,this.isNumeric(this.insuredsCount))for(var a=0;a<this.travelingInsuranceForm.insureds.length;++a)if(console.log(this.travelingInsuranceForm.insureds[a].db),null==this.travelingInsuranceForm.insureds[a].db){this.birthdaysValid=!0;break}},b.prototype.countriesCountChange=function(){if(this.isNumeric(this.countriesCount)){var b=this.travelingInsuranceForm.countries.length;if(this.countriesCount>b)for(;this.countriesCount>b;){var c=new a.TravelingCountry,d=this;c.countryFunc=function(a,b){return function(c){return b.$rootScope.isMobile&&setTimeout(function(){b.countryFunc(a)},50),c}}(b,d),this.travelingInsuranceForm.countries.push(c),b=this.travelingInsuranceForm.countries.length}this.countriesCount<b&&this.travelingInsuranceForm.countries.splice(this.countriesCount,b-this.countriesCount)}},b.prototype.updateEndDate=function(){this.minEndData=new Date(this.travelingInsuranceForm.periodStart.toString()),this.minEndData.setDate(this.minEndData.getDate()+6),console.log(this.minEndData)},b.prototype.getRegions=function(){var a=this,b="api/handbook/country/";this.$http.get(b).success(function(b){a.regions=b})},b.prototype.requestOffer=function(){var b=this;if("Получить предложение"===this.submitValue){if(!this.travelingInsuranceForm.isAgreed)return;this.firstbd=!1;for(var c=0;c<this.travelingInsuranceForm.insureds.length;++c)if(null==this.travelingInsuranceForm.insureds[c].bd)return void(this.firstbd=!0);if(null==this.travelingInsuranceForm.choiceInsurance.value||null==this.travelingInsuranceForm.currencyAndSum.value)return;if(2===this.travelingInsuranceForm.choiceInsurance.value&&null==this.travelingInsuranceForm.duration.value)return;this.firstbd=!0;var d=new a.TRAVELINGForm;d.chronic=this.travelingInsuranceForm.chronic,d.currencyAndSum=this.travelingInsuranceForm.currencyAndSum.value,d.leisureOrSports=this.travelingInsuranceForm.leisureOrSports,d.periodFinish=this.travelingInsuranceForm.periodFinish,d.periodStart=this.travelingInsuranceForm.periodStart,d.pregnant=this.travelingInsuranceForm.pregnant,d.choiceInsurance=this.travelingInsuranceForm.choiceInsurance.value,d.duration=null!=this.travelingInsuranceForm.duration.value?this.travelingInsuranceForm.duration.value:"0";for(var e=0;e<this.travelingInsuranceForm.countries.length;++e)d.countries.push(this.travelingInsuranceForm.countries[e].value.originalObject);for(var c=0;c<this.travelingInsuranceForm.insureds.length;++c)d.insureds.push(this.travelingInsuranceForm.insureds[c].bd);this.firstbd=!0,console.log(d),this.submitValue="Поиск предложений ...",this.ModalService.showModal({templateUrl:"app/loading/loading.html",controller:"LoadingModalController",controllerAs:"loadingModalCtrl",inputs:{}}),window.scrollTo(0,0),this.TRAVELINGService.loadOffers(d).success(function(){b.$scope.dismissModal("logedin"),b.$state.go("traveling.offer")})}},b}();a.TRAVELINGController=b,angular.module("nepereplaty").controller("nepereplaty.traveling.TRAVELINGController",b)}(b=a.traveling||(a.traveling={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(){this.bd=null,this.bdShow=!1}return a}();a.Insured=b;var c=function(){function a(){this.basic=new d,this.traveling=new e,this.insured=[]}return a}();a.TravelingOfferModel=c;var d=function(){function a(){this.offerId=0,this.dataId=0,this.comments=""}return a}();a.Basic=d;var e=function(){function a(){this.offerID=0}return a}();a.TravelingDetail=e;var f=function(){function a(a,b,c,d){this.id=0,this.name=a,this.surName=b,this.middleName=c,this.age=d}return a}();a.InsuredModel=f;var g=function(){function a(){this.submodule="",this.termInsurance="",this.country="",this.travelingDur="",this.name="",this.orderNumber="",this.insurancePolicy="",this.companyName="",this.startData="",this.endData="",this.address="",this.priceString="",this.city="",this.insuredsCount="",this.Price="",this.SumPrice="",this.insuredsAges="",this.insureds=[],this.Offers=n[2]}return a}();a.TRAVELINGOffer=g;var h=function(){function a(){this.value={}}return a}();a.TravelingCountry=h;var i=function(){function a(){}return a}();a.Country=i;var j=function(){function a(){this.countries=[],this.periodStart=new Date,this.periodStart.setDate(this.periodStart.getDate()+3),this.periodFinish=new Date,this.periodFinish.setDate(this.periodFinish.getDate()+10),this.currencyAndSum={text:"--",value:null},this.choiceInsurance={text:"Разовая",value:1},this.duration={text:"--",value:null},this.insureds=[],this.isAgreed=!1}return a}();a.TRAVELINGForm=j;var k=function(){function a(a,b){void 0===a&&(a=null),void 0===b&&(b=null),null==a?this.type={value:null,text:"--"}:this.type=a,this.cost=b}return a}();a.AdditionalStructure=k;var l=function(){function a(){this.isAgreed=!1,this.leisureOrSports=null,this.chronic=null,this.pregnant=null,this.cityNumber=null,this.walls={text:"--",value:null},this.addBuilding={text:"--",value:null},this.coveringStatus={text:"--",value:null},this.periodStart=new Date,this.periodFinish=new Date,this.birthDay=new Date,this.releaseYearIsLarge=!1,this.countries=[],this.insureds=[]}return a}();a.TravelingInsuranceForm=l;var m=function(){function a(){}return a}();a.InsuracneCompany=m;var n=function(){function a(){this.AdditionalOptions=[],this.IsShown=!1,this.isCompair=!1}return a}();a.TRAVELINGInsuracneOffer=n;var o=function(){function a(){}return a}();a.TRAVELINGInsuranceOffers=o;var p=function(){function a(a,b){this.Name=a,this.Description=b}return a}();a.AdditionalOption=p;var q=function(){function a(){this.BirthdayPolis=new Date}return a}();a.PrivateData=q;var r=function(){function a(){}return a}();a.OutBorderPassport=r;var s=function(){function a(){this.privateData=new q,this.outBorderPassport=new r}return a}();a.AdditionTrevalerData=s;var t=function(){function a(){this.IsMale=0,this.Birthday=new Date,this.MobileCode={text:"--",value:null},this.TelephoneCode={text:"--",value:null},this.insureds=[],this.PassportnNumber=null,this.PassportSerial=null,this.PassportWhere=null,this.PassportWhen=null,this.PassportIssued=null,this.City=null,this.Adress=null,this.additiolData=[]}return a}();a.TRAVELINGDetailsForm=t;var u=function(){function a(){this.number=null,this.year=null}return a}();a.InsuredsLicense=u;var v=function(){function a(a,b,c){this.$http=a,this.$q=b,this.$timeout=c,this.offerIndex=null}return a.prototype.getOffers=function(){return this.offers},a.prototype.getAdditional=function(){return this.AdditionalOptions},a.prototype.loadOffers=function(a){var b=this;return this.$http.post("api/traveling/insuranceoffer",a).success(function(a){b.offers=a,console.log(b.offers)})},a}();a.TRAVELINGService=v,angular.module("nepereplaty").service("TRAVELINGService",v)}(b=a.traveling||(a.traveling={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e){this.$state=b,this.$q=c,this.TRAVELINGService=d,this.$rootScope=e,this.content=new a.TRAVELINGOffer,this.canCompare=!1,null==this.TRAVELINGService.getOffers()&&this.$state.go("home"),this.content=this.TRAVELINGService.getOffers(),this.startData=this.content.startData,this.endData=this.content.endData,this.showMargin=e.isMobile;var f="";console.log(this.content),console.log(this.content.Offers);for(var g=0;g<this.content.Offers.length;++g){if(this.content.Offers[g].Total_SP>1e3){f=this.content.Offers[g].Total_SP.toFixed(3);var h=Math.floor(this.content.Offers[g].Total_SP/1e3).toFixed(0).length;f=f.slice(0,h)+" "+f.slice(h,f.length-1)}else f=this.content.Offers[g].Total_SP.toFixed(2);this.content.Offers[g].Price=f}console.log(this.content.Offers)}return b.prototype.generationOffer=function(b,c,d,e){var f=new a.TRAVELINGInsuracneOffer;return f.Company=new a.InsuracneCompany,f.Name=b,f.Company.Logo=c,f.Company.Name=d,f.Company.Price=e,console.log(f.AdditionalOptions),f.AdditionalOptions=[],f.AdditionalOptions.push(new a.AdditionalOption(b+" _ 1",b+" Description 1")),f.AdditionalOptions.push(new a.AdditionalOption(b+" _ 2",b+" Description 2")),console.log(f.AdditionalOptions),f},b.prototype.buyOffer=function(a){this.TRAVELINGService.offerIndex=a,this.TRAVELINGService.totoalPrice=this.TRAVELINGService.getOffers().Offers[a].Total_SP,this.$state.go("traveling.details")},b.prototype.onClickCompareChackBox=function(){var a,b=[];console.log(b);for(var c=0;c<this.content.Offers.length;++c)a=this.content.Offers[c],a.isCompair&&b.push(c);b.length>=2?this.canCompare=!0:this.canCompare=!1,console.log(this.canCompare),console.log(b)},b.prototype.compare=function(){this.canCompare&&this.$state.go("traveling.compare")},b}();a.TRAVELINGOfferController=b,angular.module("nepereplaty").controller("nepereplaty.traveling.TRAVELINGOfferController",b)}(b=a.traveling||(a.traveling={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d){this.$state=b,this.$q=c,this.TRAVELINGService=d,this.content=new a.TRAVELINGOffer,this.content=this.TRAVELINGService.getOffers(),this.startData=this.content.startData,this.endData=this.content.endData}return b.prototype.back=function(){console.log("________________________________==================="),this.$state.go("traveling.offer")},b.prototype.openPdf=function(){window.open("../../p/example.pdf")},b}();a.TRAVELINGCompareController=b,angular.module("nepereplaty").controller("nepereplaty.traveling.TRAVELINGCompareController",b)}(b=a.traveling||(a.traveling={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j){var k=this;this.$http=b,this.$state=c,this.$q=d,this.TRAVELINGService=e,this.auth=f,this.$scope=g,this.account=h,this.$rootScope=i,this.ModalService=j,this.content=new a.TRAVELINGOffer,this.telCode=[{text:"+7",value:"007"},{text:"+1",value:"001"},{text:"+33",value:"0033"},{text:"+374",value:"00374"},{text:"+25",value:"0024"},{text:"+908",value:"00908"}],null==this.TRAVELINGService.getOffers()&&this.$state.go("home"),this.personalData=!i.isMobile,this.openTravelPassport=!i.isMobile,this.openPersonalData=!i.isMobile,this.openTravelData=!i.isMobile,this.content=this.TRAVELINGService.getOffers(),this.startData=this.content.startData,this.endData=this.content.endData,this.logoUrl=this.content.Offers[this.TRAVELINGService.offerIndex].Company.Logo,this.userData=new a.TRAVELINGDetailsForm,this.auth.getUserId()?h.getAccount().then(function(a){k.manageData=a,k.setData()}):this.login()}return b.prototype.register=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/register.html",controller:"RegisterModalController",controllerAs:"registerModalCtrl",inputs:{name:"traveling"}}).then(function(b){b.close.then(function(b){"login"===b?a.login():("registered"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},b.prototype.login=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/login.html",controller:"LoginModalController",controllerAs:"loginModalCtrl",inputs:{name:"traveling"}}).then(function(b){b.close.then(function(b){"register"===b?a.register():("logedin"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},b.prototype.editAccount=function(){var a=this;this.account.editAccount(this.manageData).then(function(b){a.account.getAccount().then(function(b){a.manageData=b})})},b.prototype.updateMiddle=function(){this.validate(this.manageData.Name)&&this.validate(this.manageData.Surname)?this.isMiddle=!0:this.isMiddle=!1},b.prototype.validate=function(a){var b=/^[a-zA-Z ]+$/;return b.test(a)},b.prototype.onMiddlesCahsnge=function(){for(var a=0;a<this.userData.additiolData.length;++a)this.validate(this.userData.additiolData[a].privateData.NamePolis)&&this.validate(this.userData.additiolData[a].privateData.SurnamePolis)?this.userData.additiolData[a].isMiddle=!0:this.userData.additiolData[a].isMiddle=!1},b.prototype.setData=function(){this.userData.Adress=this.manageData.Adress,this.userData.Birthday=this.manageData.Birthday,this.userData.City=this.manageData.City,this.userData.Email=this.manageData.Email,this.userData.IsMale=this.manageData.IsMale?1:2,this.userData.Middlename=this.manageData.Middlename,this.userData.Name=this.manageData.Name,this.userData.PassportIssued=this.manageData.PassportIssued,this.userData.PassportnNumber=this.manageData.PassportnNumber,this.userData.PassportSerial=this.manageData.PassportSerial,this.userData.PassportWhen=this.manageData.PassportWhen,this.userData.PassportWhere=this.manageData.PassportWhere,this.userData.Surname=this.manageData.Surname,this.userData.Mobile=Number(this.manageData.Mobile),this.userData.Telephone=Number(this.manageData.Telephone),this.manageData.MobileCode?null!=this.manageData.MobileCode.text?this.userData.MobileCode=this.manageData.MobileCode:this.userData.MobileCode={text:this.manageData.MobileCode,value:this.manageData.MobileCode}:this.userData.MobileCode={text:"--",value:null},this.manageData.TelephoneCode?null!=this.manageData.TelephoneCode.text?this.userData.TelephoneCode=this.manageData.TelephoneCode:this.userData.TelephoneCode={text:this.manageData.TelephoneCode,value:this.manageData.TelephoneCode}:this.userData.TelephoneCode={text:"--",value:null},this.userData.additiolData=[];for(var b=1;b<this.content.insureds.length;++b){var c=new a.AdditionTrevalerData;console.log(this.content.insureds[b].bd),c.privateData.BirthdayPolis=this.content.insureds[b].bd,c.privateData.age=this.content.insuredsAges.split(", ")[b],this.userData.additiolData.push(c)}console.log(this.userData),this.updateMiddle(),this.onMiddlesCahsnge()},b.prototype.requestBuyOffer=function(){var b=this;if(this.pasportWhere&&(this.userData.PassportWhere=this.pasportWhere.title),this.city&&(this.userData.City=this.city.title),console.log(null==this.userData.City,null==this.userData.Email,null==this.userData.IsMale,null==this.userData.Middlename,null==this.userData.Name,null==this.userData.PassportIssued,null==this.userData.PassportnNumber,null==this.userData.PassportSerial,null==this.userData.Surname,null==this.userData.Mobile,null==this.userData.Telephone),null!=this.userData.Adress&&null!=this.userData.City&&null!=this.userData.Email&&null!=this.userData.IsMale&&null!=this.userData.Name&&null!=this.userData.PassportIssued&&null!=this.userData.PassportnNumber&&null!=this.userData.PassportSerial&&null!=this.userData.Surname&&null!=this.userData.Mobile&&null!=this.userData.Telephone&&void 0!==this.userData.PassportWhen&&(null!=this.userData.Middlename||this.isMiddle)){for(var c=0;c<this.userData.additiolData.length;c++)if(null==this.userData.additiolData[c].privateData.Gender||null==this.userData.additiolData[c].privateData.NamePolis||null==this.userData.additiolData[c].privateData.SurnamePolis||null==this.userData.additiolData[c].outBorderPassport.PassportIssuedHuman||null==this.userData.additiolData[c].outBorderPassport.PassportNameHuman||null==this.userData.additiolData[c].outBorderPassport.PassportnNumberHuman||null==this.userData.additiolData[c].outBorderPassport.PassportSerialHuman||null==this.userData.additiolData[c].outBorderPassport.PassportSurnameHuman)return;this.manageData.Adress=this.userData.Adress,this.manageData.Birthday=this.userData.Birthday,this.manageData.City=this.userData.City,this.manageData.Email=this.userData.Email,this.manageData.IsMale=1===this.userData.IsMale?!0:!1,this.manageData.Middlename=this.userData.Middlename,this.manageData.Name=this.userData.Name,this.manageData.PassportIssued=this.userData.PassportIssued,this.manageData.PassportnNumber=this.userData.PassportnNumber,this.manageData.PassportSerial=this.userData.PassportSerial,this.manageData.PassportWhen=this.userData.PassportWhen,this.manageData.PassportWhere=this.userData.PassportWhere,this.manageData.Surname=this.userData.Surname,this.manageData.Mobile=this.userData.Mobile,this.manageData.Telephone=this.userData.Telephone,this.manageData.MobileCode=this.userData.MobileCode.value,this.manageData.TelephoneCode=this.userData.TelephoneCode.value,this.editAccount(),this.TRAVELINGService.buyerInfo=this.userData;var d=new a.TravelingOfferModel;d.traveling.duration=parseFloat(this.content.travelingDur),d.traveling.countries=this.content.country,d.traveling.type=this.content.InsuranceType,d.insured.push(new a.InsuredModel(this.userData.Name,this.userData.Surname,this.userData.Middlename,parseFloat(this.content.insuredsAges.split(", ")[0])));for(var c=1;c<this.userData.additiolData.length;c++)d.insured.push(new a.InsuredModel(this.userData.additiolData[c].privateData.NamePolis,this.userData.additiolData[c].privateData.SurnamePolis,this.userData.additiolData[c].privateData.PatronymicPolis,parseFloat(this.userData.additiolData[c].privateData.age)));d.basic.cost=this.TRAVELINGService.totoalPrice,d.basic.type="traveling",d.basic.buyer=this.userData.Email,d.basic.startDate=this.content.startData,d.basic.endDate=this.content.endData,d.basic.companyId=this.content.Offers[this.TRAVELINGService.offerIndex].Company.Id,console.log(d),this.$http.put("api/admin/traveling",d).success(function(a){console.log(a),b.TRAVELINGService.offerId=a.offerId,b.$state.go("traveling.payment")})}},b}();a.TRAVELINGDetailsController=b,angular.module("nepereplaty").controller("nepereplaty.traveling.TRAVELINGDetailsController",b)}(b=a.traveling||(a.traveling={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d){this.$state=b,this.$q=c,this.TRAVELINGService=d,this.content=new a.TRAVELINGOffer,this.additianalPay=[{b:!1,c:1e3,s:"1 000"},{b:!1,c:500,s:"500"},{b:!1,c:2e3,s:"2 000"}],null==this.TRAVELINGService.getOffers()&&this.$state.go("home"),this.content=this.TRAVELINGService.getOffers(),this.offer=this.content.Offers[this.TRAVELINGService.offerIndex],this.logoUrl=this.content.Offers[this.TRAVELINGService.offerIndex].Company.Logo;var e=this.content.Offers[this.TRAVELINGService.offerIndex].Total_SP.toFixed(3),f=(this.content.Offers[this.TRAVELINGService.offerIndex].Total_SP/1e3).toFixed(0).length;e=e.slice(0,f)+" "+e.slice(f,e.length-1),this.content.Price=this.content.Offers[this.TRAVELINGService.offerIndex].Total_SP.toFixed(3),this.content.priceString=e,this.startData=this.content.startData,this.endData=this.content.endData,this.updata()}return b.prototype.updata=function(){for(var a=0,b=0;3>b;++b)this.additianalPay[b].b&&(a+=this.additianalPay[b].c);a>0?(this.add=!0,this.puymentCost=this.stringtoNumber(this.offer.Price)+a):(this.add=!1,this.puymentCost=this.stringtoNumber(this.offer.Price)),this.puymentString=this.puymentCost.toFixed(3);var c=Math.floor(this.puymentCost/1e3).toFixed(0).length;this.puymentString=this.puymentString.slice(0,c)+" "+this.puymentString.slice(c,this.puymentString.length-1),a>1e3?(this.additianalPayString=a.toFixed(3),c=(a/1e3).toFixed(0).length,this.additianalPayString=this.additianalPayString.slice(0,c)+" "+this.additianalPayString.slice(c,this.additianalPayString.length-1)):this.additianalPayString=a.toFixed(2)},b.prototype.stringtoNumber=function(a){var b=0,c=a.replace(",","."),d=c.replace(/ /g,""),e=d.replace(" ","").replace(String.fromCharCode(160),"");return b=parseFloat(e)},b.prototype.pay=function(){for(var a=0,b=0;3>b;++b)this.additianalPay[b].b&&(a+=this.additianalPay[b].c);a>0?this.puymentCost=this.stringtoNumber(this.offer.Price)+a:this.puymentCost=this.stringtoNumber(this.offer.Price),this.TRAVELINGService.totoalPrice=this.puymentCost,this.$state.go("traveling.finish")},b}();a.TRAVELINGPaymentController=b,angular.module("nepereplaty").controller("nepereplaty.traveling.TRAVELINGPaymentController",b)}(b=a.traveling||(a.traveling={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e){if(this.$http=b,this.$state=c,this.$q=d,this.TRAVELINGService=e,this.content=new a.TRAVELINGOffer,null==this.TRAVELINGService.getOffers()&&this.$state.go("home"),this.offer=this.TRAVELINGService.getOffers().Offers[this.TRAVELINGService.offerIndex],this.data=this.TRAVELINGService.buyerInfo,this.orderNumber=this.TRAVELINGService.offerId,this.startData=this.TRAVELINGService.getOffers().startData,this.price=this.TRAVELINGService.totoalPrice,this.price>1e3){this.priceString=this.price.toFixed(3);var f=(this.price/1e3).toFixed(0).length;this.priceString=this.priceString.slice(0,f)+" "+this.priceString.slice(f,this.priceString.length-1)}else this.priceString=this.price.toFixed(2);this.content.name=this.data.Name+" "+this.data.Surname,this.content.orderNumber=this.TRAVELINGService.offerId.toString(),this.content.insurancePolicy=this.offer.Company.Name+" СТРАХОВАНИЕ",this.content.insuredsCount=this.TRAVELINGService.getOffers().insuredsCount,this.content.companyName=this.offer.Company.Name,this.content.startData=this.TRAVELINGService.getOffers().startData,this.content.endData=this.TRAVELINGService.getOffers().endData,this.content.travelingDur=this.TRAVELINGService.getOffers().travelingDur,this.content.submodule="Квартира",this.content.priceString=this.priceString,this.BirthData=this.data.Birthday.toString();var g=this.BirthData.split("-");this.BirthData=g[2]+"."+g[1]+"."+g[0],this.$http.get("../api/admin/purchas/"+this.content.orderNumber+"/"+this.TRAVELINGService.totoalPrice).success(function(a){console.log(a)})}return b.prototype.downloadPdf=function(){console.log("_______________")},b}();a.TRAVELINGFinishController=b,angular.module("nepereplaty").controller("nepereplaty.traveling.TRAVELINGFinishController",b)}(b=a.traveling||(a.traveling={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i){var j=this;this.$http=b,this.$state=c,this.$q=d,this.ACCIDENTService=e,this.$scope=f,this.ModalService=g,this.$timeout=h,this.$rootScope=i,this.submitValue="Получить предложение",this.insuranceStartMinData=new Date,this.insuranceOptions=[{text:"1 месяц",value:"1"},{text:"3 месяца",value:"3"},{text:"6 месяцев",value:"6"},{text:"12 месяцев",value:"12"}],this.countryOptions=[{text:"Первый регион",value:"1"},{text:"Второй регион",value:"2"},{text:"Третий регион",value:"3"}],this.regionOptions=[{text:"Первый регион",value:"1"},{text:"Второй регион",value:"2"},{text:"Третий регион",value:"3"}],this.yearBigValue=function(){var a=(new Date).getUTCFullYear();this.accidentInsuranceForm.year>a?(this.accidentInsuranceForm.year=null,this.accidentInsuranceForm.releaseYearIsLarge=!0):this.accidentInsuranceForm.releaseYearIsLarge=!1},this.insuranceStartMinData.setDate(this.insuranceStartMinData.getDate()-1),this.accidentInsuranceForm=new a.ACCIDENTForm,this.showPeriodStart=!1,this.showPeriodFinish=!1,this.$rootScope.showFooter=!0,this.$rootScope.showBlindStopper=!1,this.dataOnInsured=!i.isMobile,this.additionalInformation=!i.isMobile,this.$http.get("api/handbook/region").success(function(a){j.regionOptions=a,j.$http.get("api/handbook/country").success(function(a){j.countryOptions=a})})}return b.prototype.requestOffer=function(){var b=this;if("Получить предложение"===this.submitValue){if(console.log(this.accidentInsuranceForm),null==this.accidentInsuranceForm.age||null==this.accidentInsuranceForm.amateurSports||null==this.accidentInsuranceForm.duration.value||null==this.accidentInsuranceForm.otherPerson||!this.isAgreed)return;var c=new a.ACCIDENTForm;c.age=this.accidentInsuranceForm.age,c.amateurSports=this.accidentInsuranceForm.amateurSports,c.otherPerson=this.accidentInsuranceForm.otherPerson,c.startData=this.accidentInsuranceForm.startData,c.duration=this.accidentInsuranceForm.duration.value,console.log(c),this.submitValue="Поиск предложений ...",this.ModalService.showModal({templateUrl:"app/loading/loading.html",controller:"LoadingModalController",controllerAs:"loadingModalCtrl",inputs:{}}),window.scrollTo(0,0),this.ACCIDENTService.loadOffers(c).success(function(){b.$scope.dismissModal("logedin"),b.$state.go("accident.offer")})}},b}();a.ACCIDENTController=b,angular.module("nepereplaty").controller("nepereplaty.accident.ACCIDENTController",b)}(b=a.accident||(a.accident={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(){this.isMale=null,this.martialStatus={text:"--",value:null},this.kids={text:"--",value:null},this.bd=null,this.bdShow=!1}return a}();a.Insured=b;var c=function(){function a(){this.basic=new d,this.accident=new e,this.insured=new f}return a}();a.AccidentOfferModel=c;var d=function(){function a(){this.offerId=0,this.dataId=0,this.comments=""}return a}();a.Basic=d;var e=function(){function a(){this.offerId=0}return a}();a.AccidentDetail=e;var f=function(){function a(){this.id=0,this.name="name",this.surName="surName",this.middleName="middleName",this.age=36}return a}();a.InsuredModel=f;var g=function(){function a(){this.termInsurance="",this.includesExcludes="",this.age="",this.name="",this.orderNumber="",this.insurancePolicy="",this.companyName="",this.startData="",this.endData="",this.address="",this.priceString="",this.passportData="",this.limitation="",this.Price="",this.SumPrice="",this.Offers=m[2]}return a}();a.ACCIDENTOffer=g;var h=function(){function a(){}return a}();a.AccidentCountry=h;var i=function(){function a(){this.startData=new Date,this.duration={text:"--",value:null},this.otherPerson=null,this.age=null,this.amateurSports=null}return a}();a.ACCIDENTForm=i;var j=function(){function a(a,b){void 0===a&&(a=null),void 0===b&&(b=null),null==a?this.type={value:null,text:"--"}:this.type=a,this.cost=b}return a}();a.AdditionalStructure=j;var k=function(){function a(){this.isAgreed=!1,this.AgeInsureds=null,this.WhoInsured=null,this.cityNumber=null,this.walls={
text:"--",value:null},this.addBuilding={text:"--",value:null},this.coveringStatus={text:"--",value:null},this.periodStart=new Date,this.periodFinish=new Date,this.birthDay=new Date,this.releaseYearIsLarge=!1,this.countries=[],this.insureds=[]}return a}();a.AccidentInsuranceForm=k;var l=function(){function a(){}return a}();a.InsuracneCompany=l;var m=function(){function a(){this.AdditionalOptions=[],this.IsShown=!1,this.isCompair=!1}return a}();a.ACCIDENTInsuracneOffer=m;var n=function(){function a(){}return a}();a.ACCIDENTInsuranceOffers=n;var o=function(){function a(a,b){this.Name=a,this.Description=b}return a}();a.AdditionalOption=o;var p=function(){function a(){this.Birthday=new Date,this.isMale=0}return a}();a.PrivateData=p;var q=function(){function a(){this.Document=1}return a}();a.Passport=q;var r=function(){function a(){this.privateData=new p,this.pasport=new q}return a}();a.AdditionACCIDENTData=r;var s=function(){function a(){this.IsMale=0,this.Birthday=new Date,this.BirthdayPolis=new Date,this.MobileCode={text:"--",value:null},this.TelephoneCode={text:"--",value:null},this.insureds=[],this.PassportWhere=null,this.PassportWhen=null,this.PassportIssued=null,this.City=null,this.Adress=null,this.additiolData=new r}return a}();a.ACCIDENTDetailsForm=s;var t=function(){function a(){this.number=null,this.year=null}return a}();a.InsuredsLicense=t;var u=function(){function a(a,b,c){this.$http=a,this.$q=b,this.$timeout=c,this.offerIndex=null}return a.prototype.getOffers=function(){return this.offers},a.prototype.getAdditional=function(){return this.AdditionalOptions},a.prototype.loadOffers=function(a){var b=this;return this.$http.post("api/accident/insuranceoffer",a).success(function(a){b.offers=a,console.log(b.offers)})},a}();a.ACCIDENTService=u,angular.module("nepereplaty").service("ACCIDENTService",u)}(b=a.accident||(a.accident={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e){this.$state=b,this.$q=c,this.ACCIDENTService=d,this.$rootScope=e,this.content=new a.ACCIDENTOffer,this.insuranceOptions=[{text:"1 месяц",value:1},{text:"3 месяца",value:3},{text:"6 месяцев",value:6},{text:"12 месяцев",value:12}],this.canCompare=!1,null==this.ACCIDENTService.getOffers()&&this.$state.go("home"),this.content=this.ACCIDENTService.getOffers(),this.startData=this.content.startData,this.endData=this.content.endData,this.showMargin=e.isMobile;for(var f=0;f<this.insuranceOptions.length;f++)if(this.insuranceOptions[f].value===this.content.duration){this.duration=this.insuranceOptions[f].text;break}for(var g="",f=0;f<this.content.Offers.length;++f){if(this.content.Offers[f].Total_SP>1e3){g=this.content.Offers[f].Total_SP.toFixed(3);var h=Math.floor(this.content.Offers[f].Total_SP/1e3).toFixed(0).length;g=g.slice(0,h)+" "+g.slice(h,g.length-1)}else g=this.content.Offers[f].Total_SP.toFixed(2);this.content.Offers[f].Price=g}console.log(this.content.Offers)}return b.prototype.buyOffer=function(a){this.ACCIDENTService.offerIndex=a,this.ACCIDENTService.totoalPrice=this.ACCIDENTService.getOffers().Offers[a].Total_SP,this.$state.go("accident.details")},b.prototype.onClickCompareChackBox=function(){var a,b=[];console.log(b);for(var c=0;c<this.content.Offers.length;++c)a=this.content.Offers[c],a.isCompair&&b.push(c);b.length>=2?this.canCompare=!0:this.canCompare=!1,console.log(this.canCompare),console.log(b)},b.prototype.compare=function(){this.canCompare&&this.$state.go("accident.compare")},b}();a.ACCIDENTOfferController=b,angular.module("nepereplaty").controller("nepereplaty.accident.ACCIDENTOfferController",b)}(b=a.accident||(a.accident={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d){this.$state=b,this.$q=c,this.ACCIDENTService=d,this.content=new a.ACCIDENTOffer,this.insuranceOptions=[{text:"1 месяц",value:1},{text:"3 месяца",value:3},{text:"6 месяцев",value:6},{text:"12 месяцев",value:12}],this.content=this.ACCIDENTService.getOffers();for(var e=0;e<this.insuranceOptions.length;e++)if(this.insuranceOptions[e].value===this.content.duration){this.duration=this.insuranceOptions[e].text;break}}return b.prototype.back=function(){this.$state.go("accident.offer")},b.prototype.openPdf=function(){window.open("../../p/example.pdf")},b}();a.ACCIDENTCompareController=b,angular.module("nepereplaty").controller("nepereplaty.accident.ACCIDENTCompareController",b)}(b=a.accident||(a.accident={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j){var k=this;this.$http=b,this.$state=c,this.$q=d,this.ACCIDENTService=e,this.auth=f,this.$scope=g,this.account=h,this.$rootScope=i,this.ModalService=j,this.content=new a.ACCIDENTOffer,this.insuranceOptions=[{text:"1 месяц",value:1},{text:"3 месяца",value:3},{text:"6 месяцев",value:6},{text:"12 месяцев",value:12}],this.telCode=[{text:"+7",value:"007"},{text:"+1",value:"001"},{text:"+33",value:"0033"},{text:"+374",value:"00374"},{text:"+25",value:"0024"},{text:"+908",value:"00908"}],this.personalData=!i.isMobile,this.passportData=!i.isMobile,this.personalDataInsured=!i.isMobile,this.passportDataInsured=!i.isMobile,null==this.ACCIDENTService.getOffers()&&this.$state.go("home"),this.content=this.ACCIDENTService.getOffers(),this.userData=new a.ACCIDENTDetailsForm,this.logoUrl=this.content.Offers[this.ACCIDENTService.offerIndex].Company.Logo,console.log(this.content);for(var l=0;l<this.insuranceOptions.length;l++)if(this.insuranceOptions[l].value===this.content.duration){this.duration=this.insuranceOptions[l].text;break}this.auth.getUserId()?h.getAccount().then(function(a){k.manageData=a,k.setData()}):this.login()}return b.prototype.register=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/register.html",controller:"RegisterModalController",controllerAs:"registerModalCtrl",inputs:{name:"accident"}}).then(function(b){b.close.then(function(b){"login"===b?a.login():("registered"===b?a.account.getAccount().then(function(b){a.manageData=b,a.setData()}):console.log(b),a.$rootScope.isModalShown=!1)})})},b.prototype.login=function(){var a=this;this.$rootScope.isModalShown=!0,this.ModalService.showModal({templateUrl:"app/auth/login.html",controller:"LoginModalController",controllerAs:"loginModalCtrl",inputs:{name:"accident"}}).then(function(b){b.close.then(function(b){"register"===b?a.register():("logedin"===b&&a.account.getAccount().then(function(b){a.manageData=b,a.setData()}),a.$rootScope.isModalShown=!1)})})},b.prototype.editAccount=function(){var a=this;this.account.editAccount(this.manageData).then(function(b){a.account.getAccount().then(function(b){a.manageData=b,a.setData()})})},b.prototype.updateMiddle=function(){this.validate(this.userData.Name)&&this.validate(this.userData.Surname)?this.isMiddle=!0:this.isMiddle=!1,console.log(this.isMiddle)},b.prototype.updateSecondMiddle=function(){this.validate(this.userData.additiolData.privateData.name)&&this.validate(this.userData.additiolData.privateData.surName)?this.isSecondMiddle=!0:this.isSecondMiddle=!1},b.prototype.validate=function(a){var b=/^[a-zA-Z ]+$/;return b.test(a)},b.prototype.setData=function(){console.log("setData"),this.userData.Adress=this.manageData.Adress,this.userData.Birthday=this.manageData.Birthday,this.userData.City=this.manageData.City,this.userData.Email=this.manageData.Email,this.userData.IsMale=this.manageData.IsMale?1:2,this.userData.Middlename=this.manageData.Middlename,this.userData.Name=this.manageData.Name,this.userData.PassportIssued=this.manageData.PassportIssued,this.userData.PassportnNumber=this.manageData.PassportnNumber,this.userData.PassportSerial=this.manageData.PassportSerial,this.userData.PassportWhen=this.manageData.PassportWhen,this.userData.PassportWhere=this.manageData.PassportWhere,this.userData.Surname=this.manageData.Surname,this.userData.Mobile=Number(this.manageData.Mobile),this.userData.Telephone=Number(this.manageData.Telephone),console.log("Hello Moto 1"),this.manageData.MobileCode?null!=this.manageData.MobileCode.text?this.userData.MobileCode=this.manageData.MobileCode:this.userData.MobileCode={text:this.manageData.MobileCode,value:this.manageData.MobileCode}:this.userData.MobileCode={text:"--",value:null},this.manageData.TelephoneCode?null!=this.manageData.TelephoneCode.text?this.userData.TelephoneCode=this.manageData.TelephoneCode:this.userData.TelephoneCode={text:this.manageData.TelephoneCode,value:this.manageData.TelephoneCode}:this.userData.TelephoneCode={text:"--",value:null},console.log("Hello Moto 2"),this.content.otherPerson||(this.userData.additiolData.privateData.name=this.userData.Name,this.userData.additiolData.privateData.surName=this.userData.Surname,this.userData.additiolData.privateData.middleName=this.userData.Middlename,this.userData.additiolData.privateData.Birthday=this.userData.Birthday,this.userData.additiolData.privateData.isMale=this.userData.IsMale,this.userData.additiolData.pasport.Document=1,this.userData.additiolData.pasport.number=this.userData.PassportnNumber,this.userData.additiolData.pasport.serial=this.userData.PassportSerial,this.userData.additiolData.pasport.where=this.userData.PassportWhere,this.userData.additiolData.pasport.when=this.userData.PassportWhen,this.userData.additiolData.pasport.issued=this.userData.PassportIssued),null==this.userData.City&&(this.$scope.form.city.$invalid=!0,this.$scope.form.city1.$invalid=!0),console.log("Hello Moto 3"),this.updateMiddle(),this.updateSecondMiddle()},b.prototype.requestBuyOffer=function(){var b=this;if(console.log(this.userData),this.pasportWhere&&(this.userData.PassportWhere=this.pasportWhere.title),this.city&&(this.userData.City=this.city.title),console.log(this.userData),null!=this.userData.Adress&&null!=this.userData.City&&null!=this.userData.Email&&null!=this.userData.IsMale&&null!=this.userData.Name&&null!=this.userData.PassportIssued&&null!=this.userData.PassportnNumber&&null!=this.userData.PassportSerial&&void 0!==this.userData.PassportWhere&&null!=this.userData.Surname&&null!=this.userData.Mobile&&null!=this.userData.Telephone&&(console.log(this.isMiddle),null!=this.userData.Middlename||this.isMiddle)){if(this.content.otherPerson){if(0===this.userData.additiolData.pasport.Document||null==this.userData.additiolData.pasport.issued||null==this.userData.additiolData.pasport.number||null==this.userData.additiolData.pasport.serial||void 0===this.userData.additiolData.pasport.where||null==this.userData.additiolData.pasport.when)return;if(null==this.userData.additiolData.privateData.Birthday||0===this.userData.additiolData.privateData.isMale||null==this.userData.additiolData.privateData.middleName||null==this.userData.additiolData.privateData.name||null==this.userData.additiolData.privateData.surName)return}this.manageData.Adress=this.userData.Adress,this.manageData.Birthday=this.userData.Birthday,this.manageData.City=this.userData.City,this.manageData.Email=this.userData.Email,this.manageData.IsMale=1===this.userData.IsMale?!0:!1,this.manageData.Middlename=this.userData.Middlename,this.manageData.Name=this.userData.Name,this.manageData.PassportIssued=this.userData.PassportIssued,this.manageData.PassportnNumber=this.userData.PassportnNumber,this.manageData.PassportSerial=this.userData.PassportSerial,this.manageData.PassportWhen=this.userData.PassportWhen,this.manageData.PassportWhere=this.userData.PassportWhere,this.manageData.Surname=this.userData.Surname,this.manageData.Mobile=this.userData.Mobile,this.manageData.Telephone=this.userData.Telephone,this.manageData.MobileCode=this.userData.MobileCode.value,this.manageData.TelephoneCode=this.userData.TelephoneCode.value,this.editAccount(),this.ACCIDENTService.buyerInfo=this.userData;var c=new a.AccidentOfferModel;c.accident.amateurSports=this.content.amateurSports,c.accident.duration=this.content.duration,c.accident.isSelf=!this.content.otherPerson,c.insured.name=this.userData.Name,c.insured.surName=this.userData.Surname,c.insured.age=parseFloat(this.content.age),c.insured.middleName=this.userData.Middlename,c.basic.cost=this.ACCIDENTService.totoalPrice,c.basic.type="accident",c.basic.buyer=this.userData.Email,c.basic.startDate=this.content.startData,c.basic.endDate=this.content.endData,c.basic.companyId=this.content.Offers[this.ACCIDENTService.offerIndex].Company.Id,this.$http.put("api/admin/accident",c).success(function(a){console.log(a),b.ACCIDENTService.offerId=a.offerId,b.$state.go("accident.payment")})}},b}();a.ACCIDENTDetailsController=b,angular.module("nepereplaty").controller("nepereplaty.accident.ACCIDENTDetailsController",b)}(b=a.accident||(a.accident={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d){if(this.$state=b,this.$q=c,this.ACCIDENTService=d,this.content=new a.ACCIDENTOffer,this.additianalPay=[{b:!1,c:50,s:"50"},{b:!1,c:10,s:"10"}],this.insuranceOptions=[{text:"1 месяц",value:1},{text:"3 месяца",value:3},{text:"6 месяцев",value:6},{text:"12 месяцев",value:12}],null==this.ACCIDENTService.getOffers()&&this.$state.go("home"),this.content=this.ACCIDENTService.getOffers(),this.offer=this.content.Offers[this.ACCIDENTService.offerIndex],this.logoUrl=this.content.Offers[this.ACCIDENTService.offerIndex].Company.Logo,this.offer.Total_SP>1e3){var e=this.offer.Total_SP.toFixed(3),f=(this.offer.Total_SP/1e3).toFixed(0).length;e=e.slice(0,f)+" "+e.slice(f,e.length-1),this.offer.Price=e}else this.offer.Price=this.offer.Total_SP.toFixed(2);for(var g=0;g<this.insuranceOptions.length;g++)if(this.insuranceOptions[g].value===this.content.duration){this.duration=this.insuranceOptions[g].text;break}this.startData=this.content.startData,this.endData=this.content.endData,this.updata()}return b.prototype.updata=function(){for(var a=0,b=0;2>b;++b)this.additianalPay[b].b&&(a+=this.additianalPay[b].c);if(a>0?(this.add=!0,this.puymentCost=this.stringtoNumber(this.offer.Price)+a):(this.add=!1,this.puymentCost=this.stringtoNumber(this.offer.Price)),this.puymentCost>1e3){this.puymentString=this.puymentCost.toFixed(3);var c=Math.floor(this.puymentCost/1e3).toFixed(0).length;this.puymentString=this.puymentString.slice(0,c)+" "+this.puymentString.slice(c,this.puymentString.length-1)}else this.puymentString=this.puymentCost.toFixed(2);a>1e3?(this.additianalPayString=a.toFixed(3),c=(a/1e3).toFixed(0).length,this.additianalPayString=this.additianalPayString.slice(0,c)+" "+this.additianalPayString.slice(c,this.additianalPayString.length-1)):this.additianalPayString=a.toFixed(2)},b.prototype.stringtoNumber=function(a){var b=0,c=a.replace(",","."),d=c.replace(/ /g,""),e=d.replace(" ","").replace(String.fromCharCode(160),"");return b=parseFloat(e)},b.prototype.pay=function(){for(var a=0,b=0;2>b;++b)this.additianalPay[b].b&&(a+=this.additianalPay[b].c);a>0?this.puymentCost=this.stringtoNumber(this.offer.Price)+a:this.puymentCost=this.stringtoNumber(this.offer.Price),this.ACCIDENTService.totoalPrice=this.puymentCost,this.$state.go("accident.finish")},b}();a.ACCIDENTPaymentController=b,angular.module("nepereplaty").controller("nepereplaty.accident.ACCIDENTPaymentController",b)}(b=a.accident||(a.accident={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function b(b,c,d,e){this.$http=b,this.$state=c,this.$q=d,this.ACCIDENTService=e,this.content=new a.ACCIDENTOffer,null==this.ACCIDENTService.getOffers()&&this.$state.go("home"),this.data=this.ACCIDENTService.buyerInfo,this.offers=this.ACCIDENTService.getOffers(),this.content.name=this.data.Surname+" "+this.data.Name,this.content.orderNumber=this.ACCIDENTService.offerId.toString(),this.content.insurancePolicy=this.offers.Offers[this.ACCIDENTService.offerIndex].Name,this.content.companyName=this.offers.Offers[this.ACCIDENTService.offerIndex].Company.Name,this.content.age=this.offers.age,this.content.startData=this.offers.startData;var f=this.offers.startData.split("."),g=new Date(f[2]+"-"+f[1]+"-"+f[0]);if(console.log(g),g.setMonth(g.getMonth()+this.offers.duration),console.log(g),this.content.endData=g.getDate().toString()+"."+(g.getMonth()+1).toString()+"."+g.getFullYear().toString(),this.content.passportData=this.data.additiolData.pasport.serial+" "+this.data.additiolData.pasport.number+" "+this.data.additiolData.pasport.where+" "+this.data.additiolData.pasport.issued,this.ACCIDENTService.totoalPrice>1e3){var h=this.ACCIDENTService.totoalPrice.toFixed(3),i=(this.ACCIDENTService.totoalPrice/1e3).toFixed(0).length;h=h.slice(0,i)+" "+h.slice(i,h.length-1),this.content.priceString=h}else this.content.priceString=this.ACCIDENTService.totoalPrice.toFixed(2);this.$http.get("../api/admin/purchas/"+this.content.orderNumber+"/"+this.ACCIDENTService.totoalPrice).success(function(a){console.log(a)})}return b.prototype.downloadPdf=function(){console.log("_______________")},b}();a.ACCIDENTFinishController=b,angular.module("nepereplaty").controller("nepereplaty.accident.ACCIDENTFinishController",b)}(b=a.accident||(a.accident={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(){}return a.configureLang=function(a){a.useStaticFilesLoader({prefix:"lang/",suffix:".json"}),a.preferredLanguage("pl_pl"),a.useSanitizeValueStrategy("sanitize"),console.log("Language configured!")},a}();a.Language=b,angular.module("nepereplaty").config(b.configureLang)}(b=a.config||(a.config={}))}(nepereplaty||(nepereplaty={}));var nepereplaty;!function(a){var b;!function(a){var b=function(){function a(){}return a.configureRoutes=function(a,b,c){b.otherwise("/"),a.state("protected",{"abstract":!0,template:"<div ui-view></div>",resolve:{authenticated:["nepereplaty.auth.auth",function(a){return console.log("protecting route"),a.isAuthenticated()}]}}).state("casco.compare",{url:"/compare",views:{"@":{templateUrl:"app/casco/compare.html",controller:"nepereplaty.casco.CASCOCompareController",controllerAs:"cascoCompareCtrl"}}}).state("home",{url:"/",templateUrl:"app/home/home.html",controller:"nepereplaty.home.HomeController",controllerAs:"homeCtrl"}).state("casco",{url:"/casco",templateUrl:"app/casco/casco.html",controller:"nepereplaty.casco.CASCOController",controllerAs:"cascoCtrl"}).state("traveling",{url:"/traveling",templateUrl:"app/traveling/travelingnew.html",controller:"nepereplaty.traveling.TRAVELINGController",controllerAs:"travelingCtrl"}).state("osago",{url:"/osago",templateUrl:"app/osago/osago.html",controller:"nepereplaty.osago.OSAGOController",controllerAs:"osagoCtrl"}).state("osago.offer",{url:"/offer",views:{"@":{templateUrl:"app/osago/offer.html",controller:"nepereplaty.osago.OSAGOOfferController",controllerAs:"osagoOfferCtrl"}}}).state("osago.details",{url:"/details",views:{"@":{templateUrl:"app/osago/details.html",controller:"nepereplaty.osago.OSAGODetailsController",controllerAs:"osagoDetailsCtrl"}}}).state("osago.payment",{url:"/payment",views:{"@":{templateUrl:"app/osago/payment.html",controller:"nepereplaty.osago.OSAGOPaymentController",controllerAs:"osagoPaymentCtrl"}}}).state("osago.finish",{url:"/finish",views:{"@":{templateUrl:"app/osago/finish.html",controller:"nepereplaty.osago.OSAGOFinishController",controllerAs:"osagoFinishCtrl"}}}).state("casco.offer",{url:"/offer",views:{"@":{templateUrl:"app/casco/offer.html",controller:"nepereplaty.casco.CASCOOfferController",controllerAs:"cascoOfferCtrl"}}}).state("casco.details",{url:"/details",views:{"@":{templateUrl:"app/casco/details.html",controller:"nepereplaty.casco.CASCODetailsController",controllerAs:"cascoDetailsCtrl"}}}).state("casco.payment",{url:"/payment",views:{"@":{templateUrl:"app/casco/payment.html",controller:"nepereplaty.casco.CASCOPaymentController",controllerAs:"cascoPaymentCtrl"}}}).state("casco.finish",{url:"/finish",views:{"@":{templateUrl:"app/casco/finish.html",controller:"nepereplaty.casco.CASCOFinishController",controllerAs:"cascoFinishCtrl"}}}).state("house",{url:"/house",templateUrl:"app/house/house.html",controller:"nepereplaty.house.HOUSEController",controllerAs:"houseCtrl"}).state("house.offer",{url:"/offer",views:{"@":{templateUrl:"app/house/offer.html",controller:"nepereplaty.house.HOUSEOfferController",controllerAs:"houseOfferCtrl"}}}).state("house.compare",{url:"/compare",views:{"@":{templateUrl:"app/house/compare.html",controller:"nepereplaty.house.HOUSECompareController",controllerAs:"houseCompareCtrl"}}}).state("house.details",{url:"/details",views:{"@":{templateUrl:"app/house/details.html",controller:"nepereplaty.house.HOUSEDetailsController",controllerAs:"houseDetailsCtrl"}}}).state("house.payment",{url:"/payment",views:{"@":{templateUrl:"app/house/payment.html",controller:"nepereplaty.house.HOUSEPaymentController",controllerAs:"housePaymentCtrl"}}}).state("house.finish",{url:"/finish",views:{"@":{templateUrl:"app/house/finish.html",controller:"nepereplaty.house.HOUSEFinishController",controllerAs:"houseFinishCtrl"}}}).state("apartment",{url:"/apartment",templateUrl:"app/apartment/apartment.html",controller:"nepereplaty.apartment.APARTMENTController",controllerAs:"apartmentCtrl"}).state("apartment.offer",{url:"/offer",views:{"@":{templateUrl:"app/apartment/offer.html",controller:"nepereplaty.apartment.APARTMENTOfferController",controllerAs:"apartmentOfferCtrl"}}}).state("apartment.compare",{url:"/compare",views:{"@":{templateUrl:"app/apartment/compare.html",controller:"nepereplaty.apartment.APARTMENTCompareController",controllerAs:"apartmentCompareCtrl"}}}).state("apartment.details",{url:"/details",views:{"@":{templateUrl:"app/apartment/details.html",controller:"nepereplaty.apartment.APARTMENTDetailsController",controllerAs:"apartmentDetailsCtrl"}}}).state("apartment.payment",{url:"/payment",views:{"@":{templateUrl:"app/apartment/payment.html",controller:"nepereplaty.apartment.APARTMENTPaymentController",controllerAs:"apartmentPaymentCtrl"}}}).state("apartment.finish",{url:"/finish",views:{"@":{templateUrl:"app/apartment/finish.html",controller:"nepereplaty.apartment.APARTMENTFinishController",controllerAs:"apartmentFinishCtrl"}}}).state("traveling.offer",{url:"/offer",views:{"@":{templateUrl:"app/traveling/offer.html",controller:"nepereplaty.traveling.TRAVELINGOfferController",controllerAs:"travelingtOfferCtrl"}}}).state("traveling.compare",{url:"/compare",views:{"@":{templateUrl:"app/traveling/compare.html",controller:"nepereplaty.traveling.TRAVELINGCompareController",controllerAs:"travelingCompareCtrl"}}}).state("traveling.details",{url:"/details",views:{"@":{templateUrl:"app/traveling/details.html",controller:"nepereplaty.traveling.TRAVELINGDetailsController",controllerAs:"travelingDetailsCtrl"}}}).state("traveling.payment",{url:"/payment",views:{"@":{templateUrl:"app/traveling/payment.html",controller:"nepereplaty.traveling.TRAVELINGPaymentController",controllerAs:"travelingPaymentCtrl"}}}).state("traveling.finish",{url:"/finish",views:{"@":{templateUrl:"app/traveling/finish.html",controller:"nepereplaty.traveling.TRAVELINGFinishController",controllerAs:"travelingFinishCtrl"}}}).state("accident",{url:"/accident",templateUrl:"app/accident/accident.html",controller:"nepereplaty.accident.ACCIDENTController",controllerAs:"accidentCtrl"}).state("accident.offer",{url:"/offer",views:{"@":{templateUrl:"app/accident/offer.html",controller:"nepereplaty.accident.ACCIDENTOfferController",controllerAs:"accidentOfferCtrl"}}}).state("accident.compare",{url:"/compare",views:{"@":{templateUrl:"app/accident/compare.html",controller:"nepereplaty.accident.ACCIDENTCompareController",controllerAs:"accidentCompareCtrl"}}}).state("accident.details",{url:"/details",views:{"@":{templateUrl:"app/accident/details.html",controller:"nepereplaty.accident.ACCIDENTDetailsController",controllerAs:"accidentDetailsCtrl"}}}).state("accident.payment",{url:"/payment",views:{"@":{templateUrl:"app/accident/payment.html",controller:"nepereplaty.accident.ACCIDENTPaymentController",controllerAs:"accidentPaymentCtrl"}}}).state("accident.finish",{url:"/finish",views:{"@":{templateUrl:"app/accident/finish.html",controller:"nepereplaty.accident.ACCIDENTFinishController",controllerAs:"accidentFinishCtrl"}}}).state("account",{url:"/account",templateUrl:"app/account/account.html",controller:"nepereplaty.account.AccountController",controllerAs:"accountCtrl"}),c.html5Mode(!0)},a.$inject=["$stateProvider","$urlRouterProvider"],a}();a.Routes=b,angular.module("nepereplaty").config(b.configureRoutes)}(b=a.config||(a.config={}))}(nepereplaty||(nepereplaty={}));